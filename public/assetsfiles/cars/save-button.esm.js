import{shallowRef as oe,readonly as Oe,toRef as dn,ref as d,customRef as fn,toValue as M,getCurrentScope as vn,onScopeDispose as hn,watch as J,nextTick as Ze,isRef as Ft,effectScope as pn,computed as p,unref as q,onMounted as Ut,onUnmounted as $t,onBeforeMount as Mt,createElementBlock as N,openBlock as A,createElementVNode as re,defineComponent as ye,normalizeStyle as ve,normalizeClass as ge,createBlock as ot,createCommentVNode as Ie,createTextVNode as mn,toDisplayString as Vt,createVNode as De,defineAsyncComponent as bn,defineCustomElement as gn}from"vue";import{Logger as se,TrackerUtil as En,isLoggedIn as Sn,getUserContext as Gt,ContextUtility as Je,RetryUtility as wn,B2xUtility as Cn,getApplicationUrl as yn}from"eqpodc-library-v1";import{initializeStore as rt}from"@seamless/store";import{getRandomId as Tn}from"@workbench/core";import{initializeConsiderationVehicles as An,selectShowableTouchpoint as In,saveStock as Dn,saveCarConfiguration as _n,saveInterest as On,updateCarConfiguration as Ln,deleteStock as kn,deleteCarConfiguration as Nn,deleteInterest as Rn}from"eqpodc-touchpoints-v1";import{UserContext as _e,AUTHENTICATION_CONNECTION as st,PhraseProjects as Bn,getBaseUrl as zn,getStageFromString as Pn,isStockTouchpoint as Qe,isCarConfigurationTouchpoint as Ee,isInterestTouchpoint as Fn,CONSIDERATION_TOUCHPOINTS_CONNECTION_NAME as Un,Market as $n,ProductType as Fe,TouchpointActionStatus as H,TouchpointsStatus as me,IdentityProvider as Ue,SESSION_STORAGE_TOUCHPOINT_ENTRY as Mn}from"eqpodc-types-v1";import{initializeWishlistCarl as Vn,refetchWishlistCarl as Gn,Configuration as b,CarlService as Tt}from"eqpodc-carl-v1";import{DeepLinkLoader as Hn}from"eqpodc-deep-links-v1";import{getTranslation as Wn}from"@owc/aem-translations-util";import{subscribe as At}from"@seamless/one-context";import"@b2x/profile-library";import{initializeLogger as jn}from"@seamless/logger";import"eqpodc-notifications-connection-v1";import"eqpodc-flyout-view-store-v1";import"eqpodc-viss-v1";/**
 * @preserve
 * Licenses of bundled dependencies can be found in dependencies-licenses.txt
 */const qn=e=>class extends e{constructor(){var i;super();const t=document.createElement("style");t.textContent=".spinner__container[data-v-68cc5a8c]{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;z-index:1500;background:#000c}.full-width[data-v-b921fb54]{width:100%}.auto-width[data-v-b921fb54]{width:auto}.icon-container.disabled[data-v-560bd408]{cursor:not-allowed}.icon-container[data-v-560bd408]:hover:not(.disabled),.icon-container[data-v-560bd408]:focus-within:not(.disabled){cursor:pointer;animation:hover-animation-560bd408 .6s ease-in-out;transform:scale(.8)}.icon-container:hover:not(.disabled) .icon.not-saved[data-v-560bd408]:hover,.icon-container:hover:not(.disabled) .icon.not-saved[data-v-560bd408]:focus,.icon-container:focus-within:not(.disabled) .icon.not-saved[data-v-560bd408]:hover,.icon-container:focus-within:not(.disabled) .icon.not-saved[data-v-560bd408]:focus{color:var(--wb-grey-45)}.icon-container:hover:not(.disabled) .icon.saved[data-v-560bd408]:hover,.icon-container:hover:not(.disabled) .icon.saved[data-v-560bd408]:focus,.icon-container:focus-within:not(.disabled) .icon.saved[data-v-560bd408]:hover,.icon-container:focus-within:not(.disabled) .icon.saved[data-v-560bd408]:focus{color:var(--wb-blue-25)}.icon-container .saved[data-v-560bd408]{color:var(--wb-blue-45)}.icon-container .not-saved[data-v-560bd408]{color:var(--wb-grey-70)}@keyframes hover-animation-560bd408{0%,85%{transform:scale(1)}40%{transform:scale(1.3)}70%,to{transform:scale(.8)}}.container[data-v-a651bcff]{display:flex;align-items:center;width:100%}:host-context(.vertical) .container[data-v-a651bcff]{flex-direction:column}.expanded-button[data-v-a651bcff]{width:100%}.heart-icon-svg[data-v-a651bcff]{display:none}.save-button-tooltip[data-v-a651bcff]{width:100%}.eqpodc-save-button__update-modal__content{display:grid;grid-template-columns:auto 1fr;row-gap:var(--wb-spacing-xxs);column-gap:var(--wb-spacing-m)}.eqpodc-save-button__update-modal__content .description{grid-column:span 2}\n",(i=this.shadowRoot)==null||i.prepend(t)}};/*! @workbench/load-utils 1.5.0 */const et="7.44.0",$e=e=>window.importModule?window.importModule(e):import(e),It=(e,t=et)=>`https://assets.oneweb.mercedes-benz.com/plugin/workbench/core/${t}/${e}`,xn=e=>{let t=e.version??(()=>{const{environmentVariables:i}=window.aemNamespace??{};return(i==null?void 0:i["second-workbench-version"])??et})();return e.allowLatestVersion&&(t=((i=et)=>`${i.split(".")[0]}-latest`)(t)),t},Kn=["loader","index.js"].join("/"),Me="wb",Yn=async e=>{const{win:t=window,prefixes:i=[Me],version:n}=e||{},r=await(async o=>{const{path:l,version:u}=o;if("strictVersion"in o&&o.strictVersion)return await $e(It(l,u));try{const c=(h=>`@workbench/core/${h}`)(l);return await $e(c)}catch{const h=It(l,xn(o));return await $e(h)}})({path:Kn,strictVersion:e&&"strictVersion"in e&&e.strictVersion||void 0,version:n}),{defineCustomElements:a}=r;i.forEach(async o=>{await a(t,o===Me?void 0:{transformTagName:u=>u.replace(`${Me}-`,`${o}-`)})})};/*! @workbench/load-utils 1.5.0 */const Ht="https://assets.oneweb.mercedes-benz.com/plugin/workbench/",Xn=`${Ht}core/`,lt=`${Xn}["1.5.0"]/css/globals.css`,Wt=`${Ht}tokens/["1.5.0"]/`,Zn=`${Wt}css/base.css`,Jn=`${Wt}css/components.css`,Le=e=>{var i,n;return((n=(i=window.aemNamespace)==null?void 0:i.environmentVariables)==null?void 0:n["second-workbench-version"])??e??"7-latest"},jt=e=>e!=null&&e.strictVersion&&e.version?e.version:((t=Le())=>{if(t==="7-latest")return"2-latest";const[i,n]=t.split(".");return parseInt(i)>7||parseInt(n)>=60?"2-latest":"1-latest"})((e==null?void 0:e.coreVersion)??Le()),qt=(e=lt,{version:t,strictVersion:i}={})=>{const n=i&&t?t:Le(t);return e.replace('["1.5.0"]',n)},Qn=e=>qt(lt,e),ea=e=>{const t=jt(e);return Jn.replace('["1.5.0"]',t)},Ve=new Map,Ge=new Map,xt=({root:e,url:t=qt(lt),addVersionToDataset:i=!0})=>"CSSStyleSheet"in window&&window.CSSStyleSheet?(n=>{if(Ve.has(n))return Ve.get(n);const r=fetch(n).then(a=>a.text()).then(a=>{const o=new CSSStyleSheet;return o.replaceSync(a),o});return Ve.set(n,r),r})(t).then(n=>{const{element:r,rootNode:a}=(l=>{if(l===void 0)return{rootNode:document,element:document.documentElement};if(l instanceof ShadowRoot)return{rootNode:l,element:l.host};if("body"in l)return{rootNode:l,element:l.body};const u=l.getRootNode();return"documentElement"in u?{rootNode:u,element:u.documentElement}:{rootNode:u,element:l}})(e);i&&(r.dataset.workbenchVersion=Le()),Ge.has(a)||Ge.set(a,{});const o=Ge.get(a);return o!=null&&o[t]||(o&&(o[t]=!0),a.adoptedStyleSheets.push(n)),n}):Promise.reject(new Error("CSSStyleSheet not supported")),ta=e=>{const t=e;return t&&(t instanceof HTMLElement||t instanceof ShadowRoot||t.documentElement)?{root:t}:e},na=async e=>{const t=ta(e);await xt({...t,url:Qn(t)}),await aa({coreVersion:t.version,strictVersion:t.strictVersion})},aa=async(e={})=>{const t=document.createElement("link");t.rel="stylesheet",t.href=(i=>{const n=jt(i);return Zn.replace('["1.5.0"]',n)})(e),document.head.appendChild(t)},ia=(e,t={})=>xt({root:e,url:ea(t),addVersionToDataset:!1}),oa="modulepreload",ra=function(e,t){return new URL(e,t).href},Dt={},sa=function(t,i,n){let r=Promise.resolve();if(i&&i.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(i.map(c=>{if(c=ra(c,n),c in Dt)return;Dt[c]=!0;const h=c.endsWith(".css"),v=h?'[rel="stylesheet"]':"";if(!!n)for(let g=o.length-1;g>=0;g--){const I=o[g];if(I.href===c&&(!h||I.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${v}`))return;const E=document.createElement("link");if(E.rel=h?"stylesheet":oa,h||(E.as="script"),E.crossOrigin="",E.href=c,u&&E.setAttribute("nonce",u),document.head.appendChild(E),h)return new Promise((g,I)=>{E.addEventListener("load",g),E.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function Ne(e){return vn()?(hn(e),!0):!1}function He(){const e=new Set,t=a=>{e.delete(a)};return{on:a=>{e.add(a);const o=()=>t(a);return Ne(o),{off:o}},off:t,trigger:(...a)=>Promise.all(Array.from(e).map(o=>o(...a))),clear:()=>{e.clear()}}}function ut(e){let t=0,i,n;const r=()=>{t-=1,n&&t<=0&&(n.stop(),i=void 0,n=void 0)};return(...a)=>(t+=1,n||(n=pn(!0),i=n.run(()=>e(...a))),Ne(r),i)}const Kt=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const la=Object.prototype.toString,ua=e=>la.call(e)==="[object Object]",ca=()=>{};function We(...e){if(e.length!==1)return dn(...e);const t=e[0];return typeof t=="function"?Oe(fn(()=>({get:t,set:ca}))):d(t)}function _t(e,t=!1,i="Timeout"){return new Promise((n,r)=>{setTimeout(t?()=>r(i):n,e)})}function da(e,...t){return t.some(i=>i in e)}function je(e){return Array.isArray(e)?e:[e]}function tt(e,t=!1){function i(v,{flush:T="sync",deep:E=!1,timeout:g,throwOnTimeout:I}={}){let D=null;const x=[new Promise(V=>{D=J(e,P=>{v(P)!==t&&(D?D():Ze(()=>D==null?void 0:D()),V(P))},{flush:T,deep:E,immediate:!0})})];return g!=null&&x.push(_t(g,I).then(()=>M(e)).finally(()=>D==null?void 0:D())),Promise.race(x)}function n(v,T){if(!Ft(v))return i(P=>P===v,T);const{flush:E="sync",deep:g=!1,timeout:I,throwOnTimeout:D}=T??{};let _=null;const V=[new Promise(P=>{_=J([e,v],([F,G])=>{t!==(F===G)&&(_?_():Ze(()=>_==null?void 0:_()),P(F))},{flush:E,deep:g,immediate:!0})})];return I!=null&&V.push(_t(I,D).then(()=>M(e)).finally(()=>(_==null||_(),M(e)))),Promise.race(V)}function r(v){return i(T=>!!T,v)}function a(v){return n(null,v)}function o(v){return n(void 0,v)}function l(v){return i(Number.isNaN,v)}function u(v,T){return i(E=>{const g=Array.from(E);return g.includes(v)||g.includes(M(v))},T)}function c(v){return h(1,v)}function h(v=1,T){let E=-1;return i(()=>(E+=1,E>=v),T)}return Array.isArray(M(e))?{toMatch:i,toContains:u,changed:c,changedTimes:h,get not(){return tt(e,!t)}}:{toMatch:i,toBe:n,toBeTruthy:r,toBeNull:a,toBeNaN:l,toBeUndefined:o,changed:c,changedTimes:h,get not(){return tt(e,!t)}}}function fa(e){return tt(e)}function va(e,t,i={}){const{immediate:n=!0,immediateCallback:r=!1}=i,a=oe(!1);let o=null;function l(){o&&(clearTimeout(o),o=null)}function u(){a.value=!1,l()}function c(...h){r&&e(),l(),a.value=!0,o=setTimeout(()=>{a.value=!1,o=null,e(...h)},M(t))}return n&&(a.value=!0,Kt&&c()),Ne(u),{isPending:Oe(a),start:c,stop:u}}function ha(e,t,i){return J(e,t,{...i,immediate:!0})}function Ot(e,t,i){const n=J(e,(...r)=>(Ze(()=>n()),t(...r)),i);return n}const Yt=Kt?window:void 0;function pa(e){var t;const i=M(e);return(t=i==null?void 0:i.$el)!=null?t:i}function Lt(...e){const t=[],i=()=>{t.forEach(l=>l()),t.length=0},n=(l,u,c,h)=>(l.addEventListener(u,c,h),()=>l.removeEventListener(u,c,h)),r=p(()=>{const l=je(M(e[0])).filter(u=>u!=null);return l.every(u=>typeof u!="string")?l:void 0}),a=ha(()=>{var l,u;return[(u=(l=r.value)==null?void 0:l.map(c=>pa(c)))!=null?u:[Yt].filter(c=>c!=null),je(M(r.value?e[1]:e[0])),je(q(r.value?e[2]:e[1])),M(r.value?e[3]:e[2])]},([l,u,c,h])=>{if(i(),!(l!=null&&l.length)||!(u!=null&&u.length)||!(c!=null&&c.length))return;const v=ua(h)?{...h}:h;t.push(...l.flatMap(T=>u.flatMap(E=>c.map(g=>n(T,E,g,v)))))},{flush:"post"}),o=()=>{a(),i()};return Ne(i),o}const ma={json:"application/json",text:"text/plain"};function ke(e){return e&&da(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}const ba=/^(?:[a-z][a-z\d+\-.]*:)?\/\//i;function ga(e){return ba.test(e)}function Ce(e){return typeof Headers<"u"&&e instanceof Headers?Object.fromEntries(e.entries()):e}function be(e,...t){return e==="overwrite"?async i=>{let n;for(let r=t.length-1;r>=0;r--)if(t[r]!=null){n=t[r];break}return n?{...i,...await n(i)}:i}:async i=>{for(const n of t)n&&(i={...i,...await n(i)});return i}}function Ea(e={}){const t=e.combination||"chain",i=e.options||{},n=e.fetchOptions||{};function r(a,...o){const l=p(()=>{const h=M(e.baseUrl),v=M(a);return h&&!ga(v)?wa(h,v):v});let u=i,c=n;return o.length>0&&(ke(o[0])?u={...u,...o[0],beforeFetch:be(t,i.beforeFetch,o[0].beforeFetch),afterFetch:be(t,i.afterFetch,o[0].afterFetch),onFetchError:be(t,i.onFetchError,o[0].onFetchError)}:c={...c,...o[0],headers:{...Ce(c.headers)||{},...Ce(o[0].headers)||{}}}),o.length>1&&ke(o[1])&&(u={...u,...o[1],beforeFetch:be(t,i.beforeFetch,o[1].beforeFetch),afterFetch:be(t,i.afterFetch,o[1].afterFetch),onFetchError:be(t,i.onFetchError,o[1].onFetchError)}),Sa(l,c,u)}return r}function Sa(e,...t){var i;const n=typeof AbortController=="function";let r={},a={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const o={method:"GET",type:"text",payload:void 0};t.length>0&&(ke(t[0])?a={...a,...t[0]}:r=t[0]),t.length>1&&ke(t[1])&&(a={...a,...t[1]});const{fetch:l=(i=Yt)==null?void 0:i.fetch,initialData:u,timeout:c}=a,h=He(),v=He(),T=He(),E=oe(!1),g=oe(!1),I=oe(!1),D=oe(null),_=oe(null),x=oe(null),V=oe(u||null),P=p(()=>n&&g.value);let F,G;const ae=()=>{n&&(F==null||F.abort(),F=new AbortController,F.signal.onabort=()=>I.value=!0,r={...r,signal:F.signal})},U=C=>{g.value=C,E.value=!C};c&&(G=va(ae,c,{immediate:!1}));let $=0;const O=async(C=!1)=>{var y,j;ae(),U(!0),x.value=null,D.value=null,I.value=!1,$+=1;const Y=$,S={method:o.method,headers:{}},X=M(o.payload);if(X){const w=Ce(S.headers),B=Object.getPrototypeOf(X);!o.payloadType&&X&&(B===Object.prototype||Array.isArray(B))&&!(X instanceof FormData)&&(o.payloadType="json"),o.payloadType&&(w["Content-Type"]=(y=ma[o.payloadType])!=null?y:o.payloadType),S.body=o.payloadType==="json"?JSON.stringify(X):X}let ee=!1;const R={url:M(e),options:{...S,...r},cancel:()=>{ee=!0}};if(a.beforeFetch&&Object.assign(R,await a.beforeFetch(R)),ee||!l)return U(!1),Promise.resolve(null);let m=null;return G&&G.start(),l(R.url,{...S,...R.options,headers:{...Ce(S.headers),...Ce((j=R.options)==null?void 0:j.headers)}}).then(async w=>{if(_.value=w,D.value=w.status,m=await w.clone()[o.type](),!w.ok)throw V.value=u||null,new Error(w.statusText);return a.afterFetch&&({data:m}=await a.afterFetch({data:m,response:w,context:R,execute:O})),V.value=m,h.trigger(w),w}).catch(async w=>{let B=w.message||w.name;if(a.onFetchError&&({error:B,data:m}=await a.onFetchError({data:m,error:w,response:_.value,context:R,execute:O})),x.value=B,a.updateDataOnError&&(V.value=m),v.trigger(w),C)throw w;return null}).finally(()=>{Y===$&&U(!1),G&&G.stop(),T.trigger(null)})},K=We(a.refetch);J([K,We(e)],([C])=>C&&O(),{deep:!0});const k={isFinished:Oe(E),isFetching:Oe(g),statusCode:D,response:_,error:x,data:V,canAbort:P,aborted:I,abort:ae,execute:O,onFetchResponse:h.on,onFetchError:v.on,onFetchFinally:T.on,get:W("GET"),put:W("PUT"),post:W("POST"),delete:W("DELETE"),patch:W("PATCH"),head:W("HEAD"),options:W("OPTIONS"),json:Q("json"),text:Q("text"),blob:Q("blob"),arrayBuffer:Q("arrayBuffer"),formData:Q("formData")};function W(C){return(y,j)=>{if(!g.value)return o.method=C,o.payload=y,o.payloadType=j,Ft(o.payload)&&J([K,We(o.payload)],([Y])=>Y&&O(),{deep:!0}),{...k,then(Y,S){return L().then(Y,S)}}}}function L(){return new Promise((C,y)=>{fa(E).toBe(!0).then(()=>C(k)).catch(y)})}function Q(C){return()=>{if(!g.value)return o.type=C,{...k,then(y,j){return L().then(y,j)}}}}return a.immediate&&Promise.resolve().then(()=>O()),{...k,then(C,y){return L().then(C,y)}}}function wa(e,t){return!e.endsWith("/")&&!t.startsWith("/")?`${e}/${t}`:e.endsWith("/")&&t.startsWith("/")?`${e.slice(0,-1)}${t}`:`${e}${t}`}/**
 * @preserve
 * Licenses of bundled dependencies can be found in dependencies-licenses.txt
 */const Re="dh-io-eqpodc/vue-lib",Ca=ut((e=rt())=>{let t;const i=d(!1),n=d(_e.CUSTOMER);return Ut(()=>{t=e.subscribe(st,r=>{i.value=Sn(r),n.value=Gt(r)})}),$t(()=>{t==null||t.unsubscribe()}),{isLoggedIn:i,userContext:n}}),kt=se.getInstance(Re,"useCarl"),Ae=d(null),ya=ut((e=rt())=>{const{locale:t}=Xt(),i=d(),n=d(),r=d(),a=d(),o=d(),l=d(!1),u=d(!1),c=d(!1),h=d(),v=d(!1),T=d(!1),E=d(!1),g=d(!1),I=d(!1),D=d(!1),_=d(!1),x=d("pls"),V=d("vis"),P=d(!1),F=d(!1),G=d(!1),ae=d(!1),U=d(!1),$=d(!1),O=d(!1),K=d(!1),k=d(!1),W=d(!1),L=d(!1),Q=d(!1),C=d(!1),y=d(!1),j=d([]),Y=d(!1),S=d(!1);J(t,()=>ee()),Mt(async()=>{X(),await Vn(),await ee(),S.value=!0});function X(){e.subscribe(st,async B=>{const Z=Gt(B),he=Ae.value;Z!==Ae.value&&(kt.debug(`[UseCARL] UserContext changed from ${Ae.value} to ${Z}`),Ae.value=Z,he!==null&&(kt.log("[UseCARL] UserContext changed from non-null. Refetching CARL configurations."),await Gn(),await ee()))})}async function ee(){await R(b.WISHLIST_PATH,i),await R(b.TEST_DRIVE_PATH,n),await R(b.ONLINE_SHOP_PATH,r),await R(b.CAR_CONFIGURATOR_PATH_APP,a),await R(b.CAR_CONFIGURATOR_PATH_OVERVIEW,o),await m(b.B2B_WORKFLOW_ENABLED,l),await m(b.BTO_DIRECT_SALES,u),await m(b.CONTACT_DEALER_FORM_ENABLED,c),await w(b.CONTACT_DEALER_FORM_FORM_ID,h,void 0),await m(b.TECHNICAL_RANGES_ENABLED,v),await m(b.ENERGY_CONSUMPTION_LABEL_STOCK,T),await m(b.ENERGY_CONSUMPTION_LABEL_CONFIGURATION,E),await m(b.PIPELINE_STOCKS_ENABLED,g),await m(b.FCIS_STOCK,I),await m(b.FCIS_CONFIG,D),await m(b.FCIS_CALCULATOR,_),await w(b.PRICE_SOURCE_STOCK,x,"pls"),await w(b.PRICE_SOURCE_CONFIGURATION,V,"vis"),await m(b.COMPARE_TILE_STOCK,P),await m(b.COMPARE_TILE_CONFIGURATION,F),await m(b.SAVE_BUTTON_STOCK,G),await m(b.SAVE_BUTTON_CONFIG,ae),await m(b.SAVE_BUTTON_INTEREST,U),await m(b.LIGHT_SWITCH_ENABLED,$),await m(b.ONLINE_SHOP_ENABLED,O),await m(b.CAR_CONFIGURATOR_ENABLED,K),await m(b.COMPARE_TEASER,k),await m(b.DEALER_ENABLED,W),await m(b.TEST_DRIVE_ENABLED,L),await m(b.TRADE_IN_ENABLED,Q),await m(b.SUB_BRAND_ENABLED,y),await m(b.ELECTRIC_ENABLED,C),await w(b.SUB_BRAND_SUB_BRANDS,j,[]),await m(b.LIST_VIEW_ENABLED,Y)}async function R(B,Z){Z.value=await Tt.getWishlistConfigurationAsLink(B)}async function m(B,Z){w(B,Z,!1)}async function w(B,Z,he){Z.value=await Tt.getWishlistConfiguration(B,he)}return{carlOnlineShopUrl:r,carlCarConfiguratorAppUrl:a,carlCarConfiguratorOverviewUrl:o,carlB2bWorkflowEnabled:l,carlDirectSalesEnabled:u,carlContactDealerEnabled:c,carlContactDealerFormId:h,carlTechnicalRangesEnabled:v,carlEnergyConsumptionLabelStockEnabled:T,carlEnergyConsumptionLabelCarConfigurationEnabled:E,carlPipelineStocksEnabled:g,carlFcisStocksEnabled:I,carlFcisCarConfigurationEnabled:D,carlFcisCalculatorEnabled:_,carlPriceSourceStock:x,carlPriceSourceCarConfiguration:V,carlCompareTileStockEnabled:P,carlCompareTileCarConfigurationEnabled:F,carlSaveButtonStockEnabled:G,carlSaveButtonCarConfigurationEnabled:ae,carlSaveButtonInterestEnabled:U,carlLightSwitchEnabled:$,carlOnlineShopEnabled:O,carlCarConfiguratorEnabled:K,carlCompareTeaserEnabled:k,carlDealerEnabled:W,carlTestDriveEnabled:L,carlTestDriveUrl:n,carlElectricEnginesEnabled:C,carlSubBrandEnabled:y,carlSubBrands:j,carlWishlistUrl:i,carlTradeInEnabled:Q,carlReady:S,carlListViewEnabled:Y}});se.getInstance(Re,"deep-links");new Hn;const Ta=se.getInstance(Re,"useFetch");Ea({options:{async beforeFetch({url:e,options:t,cancel:i}){const n=await Cn.getJwe();n||i();const{language:r,market:a}=await Je.getLocale(),o=await Je.getStage(),l=new URL(`${zn(o)}${e}`);return l.searchParams.append("marketIsoCode",a),l.searchParams.append("languageIsoCode",r),{url:l.toString(),options:{headers:{...t.headers,Authorization:`Bearer ${n}`}}}},onFetchError({data:e,error:t,response:i,context:n}){const r=new URL(n.url).pathname,a=i==null?void 0:i.status,o=i==null?void 0:i.url;return Ta.error(`Error during fetch of '${r}'`,{data:e,status:a,url:o},t),{}}}});const Nt={"de-CH":{stage:{"info-box":{price:{rrp:{footnote:"Unverbindlich empfohlener Bruttolistenpreis inkl. MWST. Sämtliche Preisangaben sind unverbindliche Preisempfehlungen des Importeurs Mercedes-Benz Schweiz AG. Der Vertriebspartner ist in seiner Preisgestaltung frei. Die abgebildeten Ausstattungsmerkmale der Fahrzeuge sind nicht verbindlich. Die Abbildungen können Zubehör und Sonderausstattungen enthalten, die nicht zum serienmässigen Lieferumfang gehören.",text:"(UVP)"}}}}},"it-CH":{stage:{"info-box":{price:{rrp:{footnote:"Prezzo di listino lordo consigliato non vincolante, IVA inclusa. Tutti i prezzi forniti sono prezzi consigliati non vincolanti dell’importatore Mercedes-Benz Svizzera SA. Il partner commerciale ha piena libertà nella determinazione dei prezzi. Le dotazioni illustrate dei veicoli non sono vincolanti. Le immagini possono contenere accessori o equipaggiamenti a richiesta che non fanno parte della dotazione di serie.",text:"(PCNV)"}}}}},"fr-CH":{stage:{"info-box":{price:{rrp:{footnote:"Prix de vente brut recommandé à titre indicatif. Tous les prix mentionnés correspondent à des recommandations de prix sans engagement de l’importateur Mercedes-Benz Suisse SA. Les partenaires de distribution sont libres de fixer leurs prix. Les caractéristiques d'équipement illustrées des véhicules ne sont pas contractuelles. Les illustrations peuvent présenter des accessoires et des options qui ne font pas partie du contenu de la livraison de série.",text:"(PVC)"}}}}},"de-DE":{"technical-data":{range:{co2EmissionCombined:"CO₂",efficiencyClasses:"Effizienzklassen",electricConsumptionCombined:"Strom",footnote:{1:"Die angegebenen Werte wurden nach dem vorgeschriebenen Messverfahren ermittelt. Es handelt sich um „WLTP-CO₂-Werte“ i.S.v. Art. 2 Nr. 3 Durchführungsverordnung (EU) 2017/1153. Die Kraftstoffverbrauchswerte wurden auf Basis dieser Werte errechnet. Der Stromverbrauch wurde auf der Grundlage VO 683/2008/ EG ermittelt. Die Angaben beziehen sich nicht auf ein einzelnes Fahrzeug und sind nicht Bestandteil des Angebots, sondern dienen allein Vergleichszwecken zwischen verschiedenen Fahrzeugtypen. Die Werte variieren in Abhängigkeit der gewählten Sonderausstattungen.",2:"Weitere Informationen zum offiziellen Kraftstoffverbrauch und zu den offiziellen spezifischen CO₂-Emissionen neuer Personenkraftwagen können dem „Leitfaden über den Kraftstoffverbrauch die CO₂-Emissionen und den Stromverbrauch neuer Personenkraftwagen“ entnommen werden, der an allen Verkaufsstellen und bei der DAT Deutsche Automobil Treuhand GmbH (www.dat.de) unentgeltlich erhältlich ist.",3:"Die angegebenen Werte wurden nach dem vorgeschriebenen Messverfahren ermittelt. Stromverbrauch und Reichweite wurden auf der Grundlage der VO 692/2008/EG ermittelt. Stromverbrauch und Reichweite sind abhängig von der Fahrzeugkonfiguration.",11:"Die angegebenen Werte wurden nach dem vorgeschriebenen Messverfahren ermittelt. Es handelt sich um „WLTP-CO₂-Werte“ i.S.v. Art. 2 Nr. 3 Durchführungsverordnung (EU) 2017/1153. Die Kraftstoffverbrauchswerte wurden auf Basis dieser Werte errechnet. Der Stromverbrauch wurde auf der Grundlage VO 683/2008/ EG ermittelt. Die Angaben beziehen sich nicht auf ein einzelnes Fahrzeug und sind nicht Bestandteil des Angebots, sondern dienen allein Vergleichszwecken zwischen verschiedenen Fahrzeugtypen. Die Werte variieren in Abhängigkeit der gewählten Sonderausstattungen.",12:"Weitere Informationen zum offiziellen Kraftstoffverbrauch und zu den offiziellen spezifischen CO₂-Emissionen neuer Personenkraftwagen können dem „Leitfaden über den Kraftstoffverbrauch die CO₂-Emissionen und den Stromverbrauch neuer Personenkraftwagen“ entnommen werden, der an allen Verkaufsstellen und bei der DAT Deutsche Automobil Treuhand GmbH (www.dat.de) unentgeltlich erhältlich ist.",13:"Die angegebenen Werte wurden nach dem vorgeschriebenen Messverfahren ermittelt. Stromverbrauch und Reichweite wurden auf der Grundlage der VO 692/2008/EG ermittelt. Stromverbrauch und Reichweite sind abhängig von der Fahrzeugkonfiguration.",co2:"Weitere Informationen zum offiziellen Kraftstoffverbrauch und zu den offiziellen spezifischen CO₂-Emissionen neuer Personenkraftwagen können dem „Leitfaden über den Kraftstoffverbrauch die CO₂-Emissionen und den Stromverbrauch neuer Personenkraftwagen“ entnommen werden, der an allen Verkaufsstellen und bei der DAT Deutsche Automobil Treuhand GmbH (www.dat.de) unentgeltlich erhältlich ist.",electricalRange:"Die angegebenen Werte wurden nach dem vorgeschriebenen Messverfahren ermittelt. Stromverbrauch und Reichweite wurden auf der Grundlage der VO 692/2008/EG ermittelt. Stromverbrauch und Reichweite sind abhängig von der Fahrzeugkonfiguration.",wltp:"Die angegebenen Werte wurden nach dem vorgeschriebenen Messverfahren ermittelt. Es handelt sich um „WLTP-CO₂-Werte“ i.S.v. Art. 2 Nr. 3 Durchführungsverordnung (EU) 2017/1153. Die Kraftstoffverbrauchswerte wurden auf Basis dieser Werte errechnet. Der Stromverbrauch wurde auf der Grundlage VO 683/2008/ EG ermittelt. Die Angaben beziehen sich nicht auf ein einzelnes Fahrzeug und sind nicht Bestandteil des Angebots, sondern dienen allein Vergleichszwecken zwischen verschiedenen Fahrzeugtypen. Die Werte variieren in Abhängigkeit der gewählten Sonderausstattungen."},fuelConsumptionCombined:"Kraftstoff"}}},"zh-TW":{stage:{"legal-information":{text:"該車輛配備套件僅顯示原廠套件內容設定，台灣之標準備配設定可能已包含套件中之部分配備。完整之標準及選配內容請參考訂製夢想車「總結」頁面所顯示之標準與選用配備。或請參考台灣賓士公告之規格配備表，並以台灣賓士授權經銷商提供的實際銷售車款之實際配備價格資訊為準。"}}}},Rt=se.getInstance("dh-io-eqpodc/i18n"),de=d(),qe=d({}),xe=d(!0);function Aa(e){async function t(){const o=M(e)??Bn.ME_HOME_CONSIDERATION,l=await Je.getLocale();de.value=`${l.language}-${l.market}`,window.setTimeout(()=>{xe.value=!1},5e3);try{const u=`${l.language}-${l.market}`;de.value=u,qe.value=await wn.retry(()=>Wn(u,o,"i18next")),Rt.log(`Successfully loaded translations for '${o}' with locale '${de.value}'`)}catch(u){Rt.error("Error loading translations",{phraseProjectId:o},u)}xe.value=!1}function i(o){return!!r(o,qe.value)||!!(de.value&&r(o,Nt[de.value]))}function n(o,l){if(!o)return"";const u=r(o,qe.value)??(de.value&&r(o,Nt[de.value]))??o;return a(u,l)}function r(o,l){return o.split(".").reduce((u,c)=>{if(u)return u[c]},l)}function a(o,l){if(!l)return o;let u=o;return Object.entries(l).forEach(c=>{const[h,v]=c;u=u.replace(`{${h}}`,v),u=u.replace(`{ ${h} }`,v)}),u}return{existsWithoutFallback:i,loadTranslations:t,t:n,isI18nWaiting:xe}}const Xt=ut(e=>{const t=d(),i=d(void 0),n=p(()=>t.value&&Pn(t.value.pageEnvironmentVariables.stage)),r=p(()=>{var c;return(c=t.value)==null?void 0:c.pageEnvironmentVariables.country}),a=p(()=>{var c;return(c=t.value)==null?void 0:c.pageEnvironmentVariables.language}),o=p(()=>{var c;return(c=t.value)==null?void 0:c.environmentVariables.assetUri}),l=p(()=>{if(!(!r.value||!a.value))return{market:r.value,language:a.value}}),u=p(()=>{var c;return(c=i.value)==null?void 0:c.subBrand});return At("PageConnection",{tenant:"eqpodc",componentName:e??"vue-lib",callback:c=>t.value=c}),At("BrandContextConnection",{tenant:"eqpodc",componentName:e??"vue-lib",callback:c=>i.value=c}),{stage:n,market:r,language:a,assetUri:o,locale:l,subBrand:u}});jn("SeamlessRouter");const Ia="sw-query-update",Da=["namespace","path","pathname","hash","search-params"];class ct extends HTMLElement{static get observedAttributes(){return Da}constructor(){super(),this.queryOptions={namespace:"",path:"",hash:"",searchParams:{}},this.queryKey=Symbol();const t=document.createElement("style");t.textContent=ct.stylesheet,this.attachShadow({mode:"closed"}).append(t)}attributeChangedCallback(t,i,n){switch(t){case"path":case"pathname":this.queryOptions.path=n;break;case"hash":this.queryOptions.hash=n;break;case"search-params":{const r=n.split("&").map(o=>o.split("=")),a=Object.fromEntries(r);this.queryOptions.searchParams=a;break}case"namespace":this.queryOptions.namespace=n}this.dispatchEvent(new CustomEvent(Ia,{bubbles:!0,detail:{queryOptions:this.queryOptions,key:this.queryKey}}))}}ct.stylesheet=`
    :host {
      display: none !important;
    }
  `;const _a="sw-target-update",Oa=["namespace","path","pathname","hash","search-params"];class dt extends HTMLElement{static get observedAttributes(){return Oa}constructor(){super(),this.urlParts={namespace:"",path:"",hash:"",searchParams:{}},this.targetKey=Symbol();const t=document.createElement("style");t.textContent=dt.stylesheet,this.attachShadow({mode:"closed"}).append(t)}attributeChangedCallback(t,i,n){switch(t){case"path":case"pathname":this.urlParts.path=n;break;case"hash":this.urlParts.hash=n;break;case"search-params":{const r=n.split("&").map(o=>o.split("=")),a=Object.fromEntries(r);this.urlParts.searchParams=a;break}case"namespace":this.urlParts.namespace=n}this.dispatchEvent(new CustomEvent(_a,{bubbles:!0,detail:{urlParts:this.urlParts,key:this.targetKey}}))}}dt.stylesheet=`
    :host {
      display: none !important;
    }
  `;se.getInstance(Re,"useRouting");const La=()=>{const e=new En;return{trackEvent:(t,i="feature",n)=>{e.pushEvent(i,t,n)},trackTouchpointEvent:(t,i,n="feature")=>{e.pushTouchpointEvent(n,t,i)}}};se.getInstance("dh-io-eqpodc/user-chooser");const Zt="dh-io-eqpodc/save-button";var we=(e=>(e.SAVE="save",e.DELETE="delete",e.UPDATE="update",e))(we||{}),nt=(e=>(e.S="s",e.M="m",e.L="l",e))(nt||{}),fe=(e=>(e.PRIMARY="primary",e.SECONDARY="secondary",e.TERTIARY="tertiary",e))(fe||{}),ne=(e=>(e.STAR="star",e.HEART="heart",e))(ne||{}),Se=(e=>(e.STAR="star",e.HEART="heart",e.CHECKMARK="checkmark",e))(Se||{}),at=(e=>(e.S="12",e.M="16",e.L="24",e.XL="32",e))(at||{}),it=(e=>(e.XS="xs",e.S="s",e.M="m",e.L="l",e))(it||{});function Ke(e,t){if(t)return t.sortedTouchpoints.filter(i=>Ee(i)).filter(i=>i.vehicleDetails.vehicleId===e.vehicleId).sort(Jt).at(0)}function Ye(e,t){if(!t)return;const i=n=>n.vehicleDetails.productCode&&e.productCode?n.vehicleDetails.productCode===e.productCode:n.vehicleDetails.configurationId&&e.configurationId?n.vehicleDetails.configurationId===e.configurationId:n.vehicleDetails.commissionNumber&&e.commissionNumber?n.vehicleDetails.commissionNumber===e.commissionNumber:!1;return t.sortedTouchpoints.filter(n=>Qe(n)).filter(i).sort(Jt).at(0)}function Xe(e,t){if(!t)return;const i=n=>n.modelSeries?n.modelSeries===e.modelSeries&&ka(e,n):!1;return t.sortedTouchpoints.filter(n=>Fn(n)).filter(i).sort((n,r)=>new Date(r.creationDate).getTime()-new Date(n.creationDate).getTime()).at(0)}function ka(e,t){var r;const i=t.subBrands??[],n=((r=e.subBrands)==null?void 0:r.split(","))??[];return i.length===n.length&&i.every(a=>n.includes(a))}function Jt(e,t){return Qe(e)&&Qe(t)||Ee(e)&&Ee(t)?Na(e,t):new Date(t.creationDate).getTime()-new Date(e.creationDate).getTime()}function Na(e,t){const i=e.vehicleDetails.updatedDate??e.creationDate,n=t.vehicleDetails.updatedDate??t.creationDate;return new Date(n).getTime()-new Date(i).getTime()}const Ra=/^[-a-zA-Z0-9]{4,255}$/,Ba=/SMART|MERCEDES_EQ|MERCEDES_AMG|MERCEDES_MAYBACH/;function Bt(e=""){if(!Ra.test(e)){let t="Invalid or missing clientId. ";throw t+="The clientId attribute is mandatory, must be between 4 and 256 characters long ",t+='and may contain letters a-z, A-Z, numbers 0-9, and the minus sign "-"',new Error(t)}}function zt(e){if(e&&!e.split(",").every(n=>n.match(Ba))){let n="Invalid subBrands. ";throw n+='These are valid subBrands: "SMART" | "MERCEDES_EQ" | "MERCEDES_AMG" | "MERCEDES_MAYBACH". ',n+='Multiple subBrands can be separated by a comma "," like this: "MERCEDES_AMG,MERCEDES_MAYBACH"',new Error(n)}}const Be=(e,t)=>{const i=e.__vccOpts||e;for(const[n,r]of t)i[n]=r;return i},za={},Pa={class:"spinner__container"};function Fa(e,t){return A(),N("div",Pa,t[0]||(t[0]=[re("wb7-spinner",null,null,-1)]))}const Ua=Be(za,[["render",Fa],["__scopeId","data-v-68cc5a8c"]]),$a=["tabindex"],ft=ye({__name:"HeartIcon",props:{size:{},wbColor:{},wbHoverColor:{},isFocusable:{type:Boolean}},setup(e){const t=e,i=d(!1);return(n,r)=>(A(),N("wb7-icon",{style:ve({"--size":`${t.size}px`})},[(A(),N("svg",{role:"button",tabindex:t.isFocusable?"0":-1,viewBox:"0 0 24 24",width:"24",height:"24",onMouseenter:r[0]||(r[0]=a=>i.value=t.isFocusable),onMouseleave:r[1]||(r[1]=a=>i.value=!1),onFocusin:r[2]||(r[2]=a=>i.value=t.isFocusable),onBlur:r[3]||(r[3]=a=>i.value=!1),style:ve({fill:i.value?`var(--wb-${n.wbHoverColor})`:`var(--wb-${n.wbColor})`})},r[4]||(r[4]=[re("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},null,-1)]),44,$a))],4))}}),Ma=["loading","disabled","variant","size","iconOnly"],Va=["name"],Ga=ye({__name:"ExpandedButton",props:{isLoading:{type:Boolean},isEnabled:{type:Boolean},isSaved:{type:Boolean},icon:{},size:{},iconSize:{},iconSaved:{},color:{},colorSaved:{},saveLabel:{},savedLabel:{},fullWidth:{type:Boolean}},setup(e){const t=e,i=p(()=>{if(t.isSaved)switch(t.iconSaved){case Se.STAR:return"favorite";case Se.HEART:return ne.HEART;case Se.CHECKMARK:default:return"bds/checkmark/24"}else return t.icon===ne.STAR?"favorite":ne.HEART}),n=u=>{switch(u){case fe.SECONDARY:return"black";case fe.TERTIARY:return"blue-45";default:return"white"}},r=p(()=>n(t.color)),a=p(()=>n(t.colorSaved||t.color)),o=p(()=>!t.saveLabel&&!t.savedLabel),l=p(()=>t.fullWidth?"full-width":"auto-width");return(u,c)=>(A(),N("div",{class:ge(l.value)},[re("wb7-button",{loading:u.isLoading,disabled:!u.isEnabled,variant:u.isSaved?u.colorSaved:u.color,size:u.size,iconOnly:o.value,class:ge(l.value)},[!u.fullWidth&&i.value===q(ne).HEART&&!u.isLoading?(A(),ot(ft,{key:0,size:u.iconSize,wbColor:u.isSaved?a.value:r.value,wbHoverColor:u.isSaved?a.value:r.value},null,8,["size","wbColor","wbHoverColor"])):u.fullWidth?Ie("",!0):(A(),N("wb7-icon",{key:1,name:i.value,style:ve({"--size":`${u.iconSize}px`})},null,12,Va)),mn(" "+Vt(u.isSaved?u.savedLabel:u.saveLabel),1)],10,Ma)],2))}}),Ha=Be(Ga,[["__scopeId","data-v-b921fb54"]]),Wa={key:0},ja={key:1},qa=["disabled","size","elevation","theme"],xa=ye({__name:"RoundButton",props:{isLoading:{type:Boolean},isEnabled:{type:Boolean},isSaved:{type:Boolean},elevation:{},icon:{},iconSize:{},size:{}},setup(e){const t=e,i=p(()=>{switch(t.size){case"s":return"38px";case"m":return"48px";case"l":default:return"66px"}});return(n,r)=>n.isLoading?(A(),N("div",Wa,[re("wb7-spinner",{style:ve({"--size":i.value}),theme:"light"},null,4)])):(A(),N("div",ja,[re("wb7-round-button",{disabled:!n.isEnabled,size:n.size,elevation:n.elevation,theme:n.isSaved?"dark":"light"},[n.icon===q(ne).HEART?(A(),ot(ft,{key:0,isSaved:n.isSaved,wbColor:n.isSaved?"white":"black",wbHoverColor:n.isSaved?"white":"black",size:n.iconSize},null,8,["isSaved","wbColor","wbHoverColor","size"])):(A(),N("wb7-icon",{key:1,name:"favorite",style:ve({"--size":`${n.iconSize}px`})},null,4))],8,qa)]))}}),Ka={key:0},Ya=["tabindex"],Xa=ye({__name:"IconButton",props:{icon:{},iconSize:{},isLoading:{type:Boolean},isSaved:{type:Boolean},isEnabled:{type:Boolean}},setup(e){const t=e,i=p(()=>({"--size":`${t.iconSize}px`}));return(n,r)=>n.isLoading?(A(),N("div",Ka,[re("wb7-spinner",{class:"loading-spinner",theme:"light",style:ve(i.value)},null,4)])):n.icon===q(ne).HEART?(A(),N("div",{key:1,class:ge(["icon-container",{disabled:!n.isEnabled}])},[De(ft,{wbColor:n.isSaved?"blue-45":"grey-70",wbHoverColor:n.isSaved?"blue-25":"grey-45",size:n.iconSize,isFocusable:n.isEnabled},null,8,["wbColor","wbHoverColor","size","isFocusable"])],2)):(A(),N("div",{key:2,class:ge(["icon-container",{disabled:!n.isEnabled}])},[re("wb7-icon",{class:ge([{saved:n.isSaved,"not-saved":!n.isSaved},"icon"]),style:ve({"--size":`${n.iconSize}px`}),tabindex:n.isEnabled?0:-1,name:"favorite"},null,14,Ya)],2))}}),Za=Be(Xa,[["__scopeId","data-v-560bd408"]]),Ja=["disabled","id","aria-labelledby"],Qa=["id"],ei={key:1,class:"expanded-button"},ti={key:2},ni={key:3},ai=ye({__name:"SaveButton",props:{clientId:{},isDisabled:{type:Boolean},saveOnly:{type:Boolean},updateTouchpointUuid:{},vehicleId:{},vehicleOnlineCode:{},productCode:{},commissionNumber:{},configurationId:{},financialCode:{},modelSeries:{},subBrands:{},uiType:{},icon:{},iconSize:{},iconSaved:{},size:{},color:{},colorSaved:{},elevation:{},saveLabel:{},savedLabel:{},fullWidth:{type:Boolean},store:{default:()=>rt()}},emits:["initialized","saved","savedError","deleted","deletedError","updated","updatedError"],setup(e,{emit:t}){const i=bn({loader:()=>sa(()=>import("../UpdateModal-X1Dd_esG.js"),[],import.meta.url),loadingComponent:Ua}),n=Tn(),r=se.getInstance(`${Zt}_${n}`),a=e,o=t,{t:l,loadTranslations:u}=Aa(),{isLoggedIn:c,userContext:h}=Ca(),{carlSaveButtonStockEnabled:v,carlSaveButtonInterestEnabled:T,carlSaveButtonCarConfigurationEnabled:E}=ya(),{trackEvent:g}=La(),{market:I}=Xt(),D=Z(),_=p(()=>ce(a.size,nt.L,Object.values(nt))),x=p(()=>ce(a.color,fe.PRIMARY,Object.values(fe))),V=p(()=>ce(a.colorSaved,fe.SECONDARY,Object.values(fe))),P=p(()=>ce(a.icon,ne.STAR,Object.values(ne))),F=p(()=>ce(a.iconSize,at.L,Object.values(at))),G=p(()=>ce(a.iconSaved,Se.CHECKMARK,Object.values(Se))),ae=p(()=>ce(a.elevation,it.XS,Object.values(it))),U=d(!1),$=d(!1),O=d(!1),K=d(!1),k=d(!1),W=d(!1),L=d(),Q=p(()=>!!L.value),C=d(),y=d(),j=d(null);let Y,S,X;J([()=>a.commissionNumber,()=>a.configurationId,()=>a.productCode,()=>a.financialCode,()=>a.vehicleId,()=>a.vehicleOnlineCode,()=>a.modelSeries,()=>a.subBrands,()=>a.updateTouchpointUuid],()=>ee()),J(()=>a.subBrands,()=>zt(a.subBrands)),J(()=>a.clientId,()=>Bt(a.clientId)),J(()=>a.isDisabled,()=>ze()),Ot(W,()=>C.value?St(C.value)?o("initialized",{status:"success",uuid:C.value.uuid}):o("initialized",{status:"success"}):o("initialized",{status:"success"})),Mt(async()=>{r.debug("Lifecycle: OnBeforeMount"),Bt(a.clientId),zt(a.subBrands),An(`save-button_${n}`),ze(),await ee()}),Ut(async()=>{var f,z;r.debug("Lifecycle: OnMounted"),X=a.store.subscribe(Un,Et).unsubscribe,Y=await a.store.getConnectionDispatchers(st);const s=((z=(f=j.value)==null?void 0:f.getRootNode())==null?void 0:z.host)??j.value;r.debug("adding click listener to host",s),Lt(s,"click",B),Lt(s,"keydown",te=>{te.key==="Enter"&&B()})}),$t(()=>{r.debug("Lifecycle: OnUnmounted"),X()});async function ee(){S&&await Et(S)}function R(){r.log("Save Touchpoint triggered"),Te.value&&(L.value=we.SAVE,g("seamless_save_button.save"),ue.value?Dn(a.productCode,a.commissionNumber,a.configurationId,a.financialCode):ie.value?_n(a.vehicleId,a.vehicleOnlineCode):le.value&&On(a.modelSeries,pe.value))}function m(){if(r.log("Update Touchpoint triggered"),!Te.value)return r.error("Unable to update touchpoint with invalid vehicle identifiers!");if(!ie.value)return r.error("Unable to update non car-configuration touchpoint!");if(!y.value)return r.error(`Unable to update not found touchpoint '${a.updateTouchpointUuid}'`);L.value=we.UPDATE,g("seamless_save_button.update"),Ln(y.value.uuid,{vehicleId:a.vehicleId,onlineCode:a.vehicleOnlineCode||y.value.vehicleDetails.onlineCode})}function w(){if(r.log("Delete Touchpoint triggered"),Te.value){if(L.value=we.DELETE,g("seamless_save_button.delete"),ue.value){const s=Ye(a,S);if(!s)throw new Error("unable to find stock touchpoint");kn(s.uuid,s.vehicleDetails.productId)}else if(ie.value){const s=Ke(a,S);if(!s)throw new Error("unable to find configuration touchpoint");Nn(s.uuid,s.vehicleDetails.productId)}else if(le.value){const s=Xe(a,S);if(!s)throw new Error("unable to find interest touchpoint");Rn(s.uuid,s.vehicleDetails.productId)}}}async function B(){if(!K.value||O.value){r.warn("Unable to handle click. Save-Button disabled or loading.");return}if(!c.value){en();return}U.value?tn():nn()}function Z(){const s=new Uint32Array(1);return window.crypto.getRandomValues(s),s[0]%2===0}const he=p(()=>a.clientId==="owcc"&&I.value===$n.DE&&h.value===_e.CUSTOMER),Qt=p(()=>D&&he.value);function vt(s){if(!he.value)return;const f={type:"AB-Test",team:"Wishlist",name:"seamless-popup-login",experience:s};window.dataLayer_ow=window.dataLayer_ow||[],window.dataLayer_ow.push({event:"click",application:{id:"ab-test",parentApplicationId:"wishlist",version:""},eventDetail:{category:"impression",action:"AB Test",label:f.name,target:{abTest:`${f.type}|${f.team}|${f.name}|${f.experience}`}}})}function en(){r.log("User not logged in. Trigger log in"),g("seamless_save_button.save_not_logged_in","link"),an(),Qt.value?(r.log("Trigger login via popup"),g("seamless_save_button.save_not_logged_in_popup","feature"),vt("B"),Y.loginViaPopup({identityProvider:Ue.CIAS,tenantId:"oneweb"})):(r.log("Trigger login via redirect"),g("seamless_save_button.save_not_logged_in_redirect","link"),vt("A"),Y.login({identityProvider:h.value===_e.EMPLOYEE||h.value===_e.EMPLOYEE_ON_BEHALF?Ue.BIAS:Ue.CIAS,tenantId:"oneweb"}))}async function tn(){var s;if(bt.value)if(a.saveOnly){g("seamless_save_button.redirect","link");const f=await yn((s=C.value)==null?void 0:s.uuid);if(!f)throw new Error("Unable to get application url");window.location.href=f}else w();else a.saveOnly||w()}function nn(){y.value?k.value=!0:R()}function an(){var f,z,te,wt,Ct,yt;if(!Pe.value)throw new Error("Unknown product type");const s={productType:Pe.value,touchpointAction:U.value?"delete":"save",vehicleId:a.vehicleId,onlineCode:a.vehicleOnlineCode,productCode:a.productCode,commissionNumber:a.commissionNumber,configurationId:a.configurationId,financialCode:a.financialCode,modelSeries:a.modelSeries,subBrands:pe.value};U.value&&(ue.value?s.productId=(z=(f=Ye(a,S))==null?void 0:f.vehicleDetails)==null?void 0:z.productId:ie.value?s.productId=(wt=(te=Ke(a,S))==null?void 0:te.vehicleDetails)==null?void 0:wt.productId:le.value&&(s.productId=(yt=(Ct=Xe(a,S))==null?void 0:Ct.vehicleDetails)==null?void 0:yt.productId)),window.sessionStorage.setItem(Mn,JSON.stringify(s))}function ze(){K.value=!a.isDisabled&&!$.value&&!!(S!=null&&S.status)&&[me.IDLE,me.TP_LOADING,me.TP_LOADED].includes(S==null?void 0:S.status)}const ht=p(()=>{var s,f,z;return!((s=a.productCode)!=null&&s.trim()||(f=a.configurationId)!=null&&f.trim()||(z=a.commissionNumber)!=null&&z.trim())}),pt=p(()=>{var s;return!((s=a.modelSeries)!=null&&s.trim()||pe.value&&(pe==null?void 0:pe.value.length)!==0)}),mt=p(()=>{var s,f;return!((s=a.vehicleId)!=null&&s.trim()||(f=a.vehicleOnlineCode)!=null&&f.trim())}),ie=p(()=>{var s;return!!((s=a.vehicleId)!=null&&s.trim())&&ht.value&&pt.value}),le=p(()=>{var s;return!!((s=a.modelSeries)!=null&&s.trim())&&ht.value&&mt.value}),ue=p(()=>{var s,f,z;return(!!((s=a.productCode)!=null&&s.trim())||!!((f=a.configurationId)!=null&&f.trim())||!!((z=a.commissionNumber)!=null&&z.trim()))&&mt.value&&pt.value}),bt=p(()=>a.uiType==="button"),on=p(()=>a.uiType==="round"),pe=p(()=>{if(a.subBrands)return a.subBrands.split(",")}),Pe=p(()=>{if(ie.value)return Fe.CONFIGURATION;if(ue.value)return Fe.STOCK;if(le.value)return Fe.INTEREST}),Te=p(()=>{let s=0;return ue.value&&s++,ie.value&&s++,le.value&&s++,s===1}),gt=p(()=>{let s=!1;return ue.value?s=v.value:ie.value?s=E.value:le.value&&(s=T.value),s||r.warn(`Save-Button is not enabled for product type '${Pe.value}'`),s&&Te.value});Ot(gt,()=>{u()});async function Et(s){var te;if(!s||Object.keys(s).length<=0)return;r.debug("Touchpoints update received",s);let f;ue.value?f=Ye(a,s):ie.value?f=Ke(a,s):le.value&&(f=Xe(a,s)),C.value=f;const z=In(s,a.updateTouchpointUuid??"");if(Ee(z)&&(y.value=z),r.debug("Found saved touchpoint:",C.value),r.debug("Found updateable touchpoint:",y.value),L.value===we.UPDATE&&(f=y.value),r.debug("Working with touchpoint:",f),U.value=St(f),$.value=rn(f),O.value=sn(s)||un(f),W.value=ln(s),r.debug("isSaved:",U.value),r.debug("isLoading:",O.value),r.debug("isLoggedIn:",c.value),Q.value)switch(f==null?void 0:f.actionStatus){case H.SAVING_SUCCESS:Ee(f)?o("saved",{uuid:f.uuid,vehicleOnlineCode:(te=f.vehicleDetails)==null?void 0:te.onlineCode}):o("saved",{uuid:f.uuid}),L.value=void 0,k.value=!1;break;case H.SAVING_FAILED:o("savedError",l("save-button.event.saved-error.text")),L.value=void 0,k.value=!1;break;case H.DELETION_SUCCESS:o("deleted",{uuid:f.uuid}),L.value=void 0,k.value=!1;break;case H.DELETION_FAILED:o("deletedError",l("save-button.event.deleted-error.text")),L.value=void 0,k.value=!1;break;case H.UPDATING_SUCCEEDED:o("updated",{uuid:f.uuid}),L.value=void 0,k.value=!1;break;case H.UPDATING_FAILED:o("updatedError",l("save-button.event.updated-error.text")),L.value=void 0,k.value=!1;break}S=s,ze()}function St(s){if(!s)return!1;const f=[H.DELETION_SUCCESS,H.SAVING_FAILED,H.SAVING_LOADING,H.UPDATING_FAILED,H.UPDATING_LOADING];return s.actionStatus?!f.includes(s.actionStatus):!0}function rn(s){return!!(s!=null&&s.vehicleRequests&&s.vehicleRequests.length>0)}function sn(s){return[me.TP_LOADING].includes(s.status)}function ln(s){return[me.TP_LOADED,me.TP_FAILED].includes(s.status)}function un(s){return!s||!s.actionStatus?!1:[H.SAVING_LOADING,H.DELETION_LOADING,H.UPDATING_LOADING].includes(s.actionStatus)}const ce=(s,f,z)=>s?z.find(te=>te===s.toLowerCase())??f:f,cn=()=>k.value=!1;return(s,f)=>(A(),N("div",{ref_key:"saveButtonRef",ref:j,dir:"ltr"},[gt.value?(A(),N("div",{key:0,class:ge(["container",{disabled:!K.value||O.value}])},[re("wb7-tooltip",{class:"save-button-tooltip",position:"start",role:"tooltip",disabled:!$.value||null,id:`save-button-tooltip-${q(n)}`,"aria-labelledby":$.value?`save-button-tooltip-${q(n)}-content`:null},[$.value?(A(),N("div",{key:0,slot:"content",id:`save-button-tooltip-${q(n)}-content`},Vt(q(l)("save-button.delete-vehicle.disabled.request-vehicle.tooltip")),9,Qa)):Ie("",!0),bt.value?(A(),N("div",ei,[De(Ha,{isLoading:O.value,isEnabled:K.value,isSaved:U.value,icon:P.value,iconSize:F.value,iconSaved:G.value,color:x.value,size:_.value,saveLabel:s.saveLabel,savedLabel:s.savedLabel,fullWidth:s.fullWidth,colorSaved:V.value,"aria-describedby":$.value?`save-button-tooltip-${q(n)}`:null},null,8,["isLoading","isEnabled","isSaved","icon","iconSize","iconSaved","color","size","saveLabel","savedLabel","fullWidth","colorSaved","aria-describedby"])])):on.value?(A(),N("div",ti,[De(xa,{isLoading:O.value,isEnabled:K.value,isSaved:U.value,elevation:ae.value,icon:P.value,iconSize:F.value,iconSaved:G.value,size:_.value,"aria-describedby":$.value?`save-button-tooltip-${q(n)}`:null},null,8,["isLoading","isEnabled","isSaved","elevation","icon","iconSize","iconSaved","size","aria-describedby"])])):(A(),N("div",ni,[De(Za,{icon:P.value,iconSize:F.value,iconSaved:G.value,isLoading:O.value,isSaved:U.value,isEnabled:K.value,"aria-describedby":$.value?`save-button-tooltip-${q(n)}`:null},null,8,["icon","iconSize","iconSaved","isLoading","isSaved","isEnabled","aria-describedby"])]))],8,Ja)],2)):Ie("",!0),k.value&&q(Ee)(y.value)?(A(),ot(q(i),{key:1,touchpoint:y.value,isLoading:O.value,onCloseModal:cn,onSaveTouchpoint:R,onUpdateTouchpoint:m},null,8,["touchpoint","isLoading"])):Ie("",!0)],512))}}),ii=Be(ai,[["__scopeId","data-v-a651bcff"]]),Pt="eqpodc-save-button",oi=gn(ii,{configureApp:e=>{e.config.errorHandler=(t,i,n)=>se.getInstance(Zt,"GlobalErrorHandler").error(`Caught error from '${n}'`,{},t)}});class ri extends oi{async connectedCallback(){super.connectedCallback(),this.shadowRoot&&await Promise.all([na(this.shadowRoot),ia(this.shadowRoot),Yn({prefixes:["wb7"]})])}}const si=()=>{window.customElements.get(Pt)||window.customElements.define(Pt,qn(ri))};si();export{Aa as Y,La as n,si as registerCustomElement,Xt as s};
