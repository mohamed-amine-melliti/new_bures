window.analytics_ow.personalisation.templatecodes.lastConfigPrivateCarsAndVans=new analytics_ow.personalisation.template({tracking_object:{type:"alwayson_experience-targeting_manual",campaign:"last-configuration",format:"simple-teaser",experience:"target",vehicle:"no-vehicle-context",trigger:""},target:async function(e,a,t,n,i){analytics_ow.personalisation.func.setLocales(),i([{"localStorage?.target_configured_details":{exp:"string",val:typeof localStorage?.target_configured_details},"localStorage?.target_configured_canceled":{exp:"string",val:typeof localStorage?.target_configured_canceled},"localStorage?.vans_target_configured_details":{exp:"string",val:typeof localStorage?.vans_target_configured_details}}]),(localStorage?.target_configured_details||localStorage?.target_configured_canceled||localStorage?.vans_target_configured_details)&&(a.set_usecase_information(t,n),i([{"vars.most_recent_config?.vehicleCategory":{exp:"private",val:t.most_recent_config?.vehicleCategory},"vars.most_recent_config?.vehicleCategory_":{exp:"undefined",val:t.most_recent_config?.vehicleCategory}}]),"private"!=t.most_recent_config?.vehicleCategory&&void 0!==t.most_recent_config?.vehicleCategory||a.show_simple_teaser(e,a,t,n,i))},control:function(e,a,t,n,i){if(analytics_ow.personalisation.func.setLocales(),i([{"localStorage?.target_configured_details":{exp:"string",val:typeof localStorage?.target_configured_details},"localStorage?.target_configured_canceled":{exp:"string",val:typeof localStorage?.target_configured_canceled},"localStorage?.vans_target_configured_details":{exp:"string",val:typeof localStorage?.vans_target_configured_details}}]),(localStorage?.target_configured_details||localStorage?.target_configured_canceled||localStorage?.vans_target_configured_details)&&(a.set_usecase_information(t,n),i([{"vars.most_recent_config?.vehicleCategory":{exp:"private",val:t.most_recent_config?.vehicleCategory},"vars.most_recent_config?.vehicleCategory_":{exp:"undefined",val:t.most_recent_config?.vehicleCategory}}]),"private"==t.most_recent_config?.vehicleCategory||void 0===t.most_recent_config?.vehicleCategory)){n.experience="control";let o,c=analytics_ow.personalisation.func.simpleteaser_update(!0,n.campaign);a.vans_tracking(t,n),i([{simpleTeaserElement:{exp:"object",val:typeof c},campaignModuleElement:{exp:"object",val:typeof document.querySelector('[data-component-name="hp-campaigns"]:not([data-aem-targeting-hidden-initially])')}}]),c?o="simpleTeaserElement_active":document.querySelector('[data-component-name="hp-campaigns"]:not([data-aem-targeting-hidden-initially])')&&(n.format="campaign-module",o="campaignModuleElement_active"),window.analytics_ow.personalisation.func.impressionTracking(n,e,o),window.analytics_ow.personalisation.func.sendEvergageData(e,n,"Impression")}},experience_specific_methods:{set_usecase_information:function(e,a){let t=[localStorage.target_configured_details,localStorage.target_configured_canceled,localStorage.vans_target_configured_details].filter((e=>void 0!==e)).map((e=>JSON.parse(e)));e.most_recent_config=t.length>0&&t.reduce(((e,a)=>e.timestamp>a.timestamp?e:a)),a.trigger=e.most_recent_config?.onlinecode?"configuration-completed":"configuration-canceled",a.vehicle=e.most_recent_config.vehiclecode},vans_tracking:function(e,a){"private"==e.most_recent_config?.vehicleCategory&&(a.campaign="vans_"+a.campaign)},show_simple_teaser:async function(e,a,t,n,i){let o,c=!1;c=!!window.sessionStorage["target_vehicle_deeplinks_"+t.language]||await analytics_ow.personalisation.func.getVehicleDeeplinks(),c&&(o=JSON.parse(window.sessionStorage["target_vehicle_deeplinks_"+t.language]),void 0===t.most_recent_config?.vehicleCategory?(modelCode=await analytics_ow.personalisation.func.getVMDSData_modelmapping(t.most_recent_config?.vehicleBaumuster.substring(0,4)),n.vehicle=modelCode.toLowerCase()):modelCode=n.vehicle.toUpperCase());let l,r,s,g=o[modelCode]?.ONLINE_SHOP?.modelSeriesUrl,_=window.location.hostname,p=window.location.pathname.split("/"),d=analytics_ow.personalisation.func.simpleteaser_update(!0,n.campaign),m="string"==typeof g&&"string"==typeof e.onlineShop_label&&""!==e.onlineShop_label&&"configuration-completed"==n.trigger;if("private"==t.most_recent_config?.vehicleCategory&&(r=t.most_recent_config?.vehicleimage+"&Resize,width=480",s="vans/buy/van-online-configurator.html#","configuration-completed"===n.trigger&&(l=s+"/onlinecode/"+t.most_recent_config.onlinecode)),void 0===t.most_recent_config?.vehicleCategory)if(r=t.most_recent_config.vehicleimage+"&imgt=P27&bkgnd=8&pov=BE020&im=Crop,rect=(360,250,1280,580);Resize",s=""===p[1]||"passengercars.html"===p[1]?"https://"+_+"/passengercars/mercedes-benz-cars/car-configurator.html":"https://"+_+"/"+p[1]+"/passengercars/mercedes-benz-cars/car-configurator.html","configuration-completed"===n.trigger)l=s+"/onlinecode/CCci/"+t.market.replace("UK","GB")+"/"+t.language+"/"+t.most_recent_config.onlinecode;else{const e=t?.most_recent_config?.lastStep||"";l=s+"/configuration/CCci/"+t.market.replace("UK","GB")+"/"+t.language+"/"+t.most_recent_config.vehicleid+"/"+e}if(i({deeplinks:{exp:!0,val:c},ccEntryUrl:{exp:"string",val:typeof l},onlineShopUrl:{exp:"string",val:typeof g},onlineShopCondition:{exp:!0,val:m}}),d){let i=analytics_ow.personalisation.func.getJSONData(d.getAttribute("component-id"))||"{}",o=!!e.split_content_by_config_type&&"configuration-completed"==n.trigger,c=e.overwrite_simple_teaser,s=c?o?e.cc_primaryBtn:e.primaryBtn:i.links[0].label,_=c?o?e.cc_headline:e.headline:null,p=c?o?e.cc_copy:e.copy:null;newData=Object.assign({},i,{image:{source:r.includes("undefined")?i.image.source:r},links:[{url:l,target:i.links[0].target,aria:i.links[0].aria,label:s,type:m?"secondary":"primary"}]}),m&&newData.links.push({url:g,target:i.links[0].target,aria:i.links[0].aria,label:e.onlineShop_label,type:"primary"}),analytics_ow.personalisation.func.simpleteaser_update(!1,n.campaign,_,p,newData.image,newData.links,null,null),a.vans_tracking(t,n),window.analytics_ow.personalisation.func.impressionTracking(n,e,"simpleTeaserElement_active"),window.analytics_ow.personalisation.func.sendEvergageData(e,n,"Impression"),setTimeout((function(){analytics_ow.personalisation.func.init_simple_teaser_buttons(e,n,d)}),500)}else if(document.querySelector('[data-component-name="hp-campaigns"]:not([data-aem-targeting-hidden-initially])')&&(n.format="campaign-module",r&&!r.includes("undefined"))){let i=!!e.split_content_by_config_type&&"configuration-completed"==n.trigger,o=i?e.cc_primaryBtn:e.primaryBtn;const c={title:i?e.cc_headline:e.headline,subline:i?e.cc_copy:e.copy,image:r,links:[{label:o,link:l,target:"_self"}],prio:t.prio};m&&c.links.unshift({label:e.onlineShop_label,link:g,target:"_self"}),analytics_ow.personalisation.func.campaign_module_update(c),a.vans_tracking(t,n),analytics_ow.personalisation.func.campaign_module_tracking(c,n,e)}}},experience_specific_vars:{market:window.analytics_ow.personalisation.globalvars.market||window.analytics_ow.personalisation.func.find_all_by_key(dataLayer_ow,"market")[0],language:window.analytics_ow.personalisation.globalvars.language||window.analytics_ow.personalisation.func.find_all_by_key(dataLayer_ow,"language")[0].toLowerCase(),most_recent_config:void 0,prio:7},track_on_init:!1});