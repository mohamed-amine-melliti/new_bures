import{defineComponent as $,createElementBlock as y,openBlock as p,createElementVNode as _,createCommentVNode as w,computed as S,normalizeClass as W,normalizeStyle as Z,ref as T,inject as K,onMounted as N,onUnmounted as ee,watch as te,unref as h,createVNode as C,Fragment as ne,renderList as oe,createBlock as L,toDisplayString as ae,resolveComponent as se,provide as B,createSSRApp as re,createApp as ie}from"vue";import{SeamlessConnection as ce,initializeStore as le}from"@seamless/store";import{initializeLogger as de}from"@seamless/logger";import{getTranslation as pe}from"@owc/aem-translations-util";const me={class:"hp-text-and-media__text"},ue=["innerHTML"],ve=["innerHTML"],he=["innerHTML"],_e=$({__name:"text-and-media-text",props:{textPayload:{}},setup(t){return(e,n)=>(p(),y("section",null,[_("div",me,[e.textPayload.overline?(p(),y("p",{key:0,innerHTML:e.textPayload.overline,class:"hp-text-and-media__text-overline"},null,8,ue)):w("",!0),_("h2",{innerHTML:e.textPayload.headline,class:"hp-text-and-media__text-headline"},null,8,ve),_("p",{innerHTML:e.textPayload.subline,class:"hp-text-and-media__text-subline"},null,8,he)])]))}}),ye=function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),fe=function(t,e){return new URL(t,e).href},q={},M=function(e,n,o){let s=Promise.resolve();if(n&&n.length>0){const r=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=fe(l,o),l in q)return;q[l]=!0;const d=l.endsWith(".css"),b=d?'[rel="stylesheet"]':"";if(!!o)for(let f=r.length-1;f>=0;f--){const E=r[f];if(E.href===l&&(!d||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${b}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":ye,d||(u.as="script"),u.crossOrigin="",u.href=l,i&&u.setAttribute("nonce",i),document.head.appendChild(u),d)return new Promise((f,E)=>{u.addEventListener("load",f),u.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${l}`)))})}))}function c(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return s.then(r=>{for(const a of r||[])a.status==="rejected"&&c(a.reason);return e().catch(c)})},ge={assets:"4.10.1"},be={iconRootPath:`https://assets.oneweb.mercedes-benz.com/plugin/workbench/assets/${ge.assets}/icons`},Ee=t=>`${be.iconRootPath}/${t}.svg`,we=t=>{t()},$e={attributes:!0,childList:!1,subtree:!1,attributeFilter:["dir"]};class Te{constructor(e){this.targetEl=e,we(()=>{this.createObserver(),this.observe()})}setDir(e){this.targetEl.setAttribute("dir",e)}get dir(){return this.targetEl.getAttribute("dir")}get isRtl(){return this.dir==="rtl"}get isLtr(){return!this.isRtl}dispatchDirChangeEvent(){const e=new CustomEvent("wbdirchange",{detail:{dir:this.dir}});document.dispatchEvent(e)}createObserver(){this.observer=new MutationObserver(()=>this.dispatchDirChangeEvent())}observe(){this.observer.observe(this.targetEl,$e)}}(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})();new Te(document.documentElement);const ke=["name"],Ae={key:0,class:"hp-icon-notification"},Le=$({__name:"wb-icon-ssr",props:{name:{},hasBubble:{type:Boolean},customClass:{},size:{},color:{}},setup(t){const e=t,n=S(()=>({"--mask":`url(${Ee(e.name)})`,"--size":e.size||"24px","--color":e.color||"currentColor"}));return(o,s)=>(p(),y("div",{class:W(["hp-icon",{[`hp-icon--${e.customClass}`]:o.customClass}])},[_("div",{class:"hp-icon-img wb-icon",name:o.name,style:Z(n.value),"aria-hidden":"true"},null,12,ke),o.hasBubble?(p(),y("span",Ae)):w("",!0)],2))}}),k=(t,e)=>{Array.from(t).forEach(n=>{let o,s;n instanceof HTMLImageElement||n instanceof HTMLSourceElement&&e?(o="data-src",s="src"):(o="data-srcset",s="srcset");const c=n.getAttribute(o);c&&(n.setAttribute(s,c),n.removeAttribute(o))})},Q=(t,e,n)=>{let o=[];const s=new IntersectionObserver(r=>{r.forEach(a=>{if(a.isIntersecting){const i=a.target;if(i instanceof HTMLPictureElement){k(i.getElementsByTagName("source")),k(i.getElementsByTagName("img"));{const l=o.indexOf(i),d=o[l+1];d&&(k(d.getElementsByTagName("source")),k(d.getElementsByTagName("img")))}}else i instanceof HTMLVideoElement&&(k(i.getElementsByTagName("source"),!0),i.dataset.loaded||(i.load(),i.dataset.loaded="true"));s.unobserve(i)}})},t);return{lazyLoadObserver:s,resetInitialEntries:()=>{o=[]}}},xe=({isManuallyPaused:t,isPlaying:e,isVideoInView:n,hasStartedToPlay:o})=>({videoObserver:new IntersectionObserver(c=>{c.forEach(r=>{const a=r.target;r.isIntersecting?(n&&(n.value=!0),a.paused&&!t.value&&(a.play(),e&&(e.value=!0),o&&!o.value&&(o.value=!0))):(n&&(n.value=!1),a.pause(),e&&(e.value=!1))})},{root:null,rootMargin:"0px",threshold:0})});/*! connection-aem-tracking 2.7.0 */const J="OWC_TRACKING_MANAGER",j="PUSH_TRACKING_EVENT",H={trackingEvents:[]};new class extends ce{constructor(){super(J)}get initialState(){return H}getReducer(){return(t=H,e)=>e.type===this.getActionType(j)?{...t,trackingEvents:[...t.trackingEvents,e.payload]}:t}getPublicDispatchers(){return{pushTrackingEvent:t=>{var e;return(e=window.top)==null||e.dataLayer_ow.push(t),this.getAction(j,t)}}}};const Oe=()=>le().getConnectionDispatchers(J).then(t=>t);let D;const Ne=(t,e,n)=>({event:"click",eventDetail:t,application:{id:n||"aem",version:e,parentApplicationId:n||"aem"}}),X=async()=>{D=await Oe()},P=async(t,e,n="")=>{D||await X();const o=Ne(t,e,n);D.pushTrackingEvent(o)},A=t=>{var e;return((e=t.toLowerCase().match(/[a-z]+\d*|\d+/g))==null?void 0:e.join("_"))??""},Se={class:"hp-video__ratio"},Ce=["title"],Me=["data-src"],De=["data-on"],Pe=["aria-label"],Ie=$({__name:"hp-video",props:{payload:{},componentName:{},componentVersion:{},translationData:{}},setup(t){const e=t,n=A(e.componentName.replace(/^hp-/,"")),o=T(),s=T(!1),c=T(!1),r=T(!1);let a=[25,50,90],i;const l={root:null,rootMargin:"400px",threshold:0},d=K("wbDataOnMode"),b=async()=>{const{lazyLoadObserver:m}=Q(l),{videoObserver:v}=xe({isManuallyPaused:c,isPlaying:s,hasStartedToPlay:r});i=v,m.observe(o.value),o.value.addEventListener("canplay",()=>{i.observe(o.value)},{once:!0}),o.value.addEventListener("timeupdate",x)};N(async()=>{b()}),ee(()=>{i.unobserve(o.value)});const g=S(()=>s.value?"bds/pause/16":"bds/media-play/16"),u=S(()=>{var m,v;return e.translationData.play&&e.translationData.pause?s.value?(m=e.translationData)==null?void 0:m.pause:(v=e.translationData)==null?void 0:v.play:s.value?"pause":"play"}),f=async()=>{const m=o.value;s.value?m.pause():m.play(),s.value=!s.value,c.value=!c.value,await E(s.value?"video_start":"video_pause")},E=async m=>{var v;await P({name:m,category:"video",action:`video_html5.${m}`,label:`${n}.${A((v=o.value)==null?void 0:v.title)||"no_title"}`},e.componentVersion)},x=m=>{var z;if(!s.value)return;const v=m.target;Math.floor(v.currentTime/v.duration*100)>=a[0]&&(P({name:O(),category:"video",action:`video_html5.video_${a[0]}`,label:`${n}.${A((z=o.value)==null?void 0:z.title)||"no_title"}`},e.componentVersion),a.shift()),a.length===0&&o.value.removeEventListener("timeupdate",x)},O=()=>a[0]===a[a.length-1]?"video_complete":"video_progress";return te(r,async m=>{m&&await E("video_start")}),(m,v)=>(p(),y("div",Se,[_("video",{ref_key:"videoToObserve",ref:o,class:"hp-video",muted:"",loop:"",playsinline:"",title:e.payload.title??void 0,"aria-hidden":"true"},[_("source",{"data-src":e.payload.source,type:"video/mp4"},null,8,Me)],8,Ce),_("div",{class:"hp-video__controls","data-on":h(d)},[_("button",{class:"hp-video__btn wbx-round-button wbx-round-button--elevation-xs","aria-label":u.value,onClick:f},[C(Le,{name:g.value,size:"1rem",color:"white",customClass:"no-flip"},null,8,["name"])],8,Pe)],8,De)]))}}),Re={class:"hp-image__ratio"},Ve=["media","data-srcset"],ze=["data-src","alt","title"],Be=$({__name:"hp-image",props:{payload:{}},setup(t){const e=t,n=T(),o=e.payload.sources,s={mq1:320,mq2:480,mq3:768,mq4:1024,mq5:1280,mq6:1440},r=(()=>{const i=[];return Object.keys(s).forEach(l=>{i.push({media:`(min-width: ${s[l]}px)`,srcset:`${o[l]}`})}),i.reverse()})(),a={root:null,rootMargin:"400px",threshold:0};return N(()=>{const{lazyLoadObserver:i}=Q(a);i.observe(n.value)}),(i,l)=>(p(),y("div",Re,[_("picture",{class:"hp-image",ref_key:"pictureToObserve",ref:n},[(p(!0),y(ne,null,oe(h(r).slice(0,-1),(d,b)=>(p(),y("source",{key:b,media:d.media,"data-srcset":d.srcset},null,8,Ve))),128)),_("img",{"data-src":h(r)[h(r).length-1].srcset,alt:i.payload.description,title:i.payload.title},null,8,ze)],512)]))}}),qe={class:"hp-text-and-media__media"},je={class:"hp-text-and-media__ratio"},He=$({__name:"text-and-media-media",props:{mediaPayload:{},mediaType:{},componentName:{},componentVersion:{},translationData:{}},setup(t){const e=t;return(n,o)=>(p(),y("section",null,[_("div",qe,[_("div",je,[n.mediaType==="video"?(p(),L(Ie,{key:0,payload:n.mediaPayload,componentName:e.componentName,componentVersion:n.componentVersion,translationData:e.translationData},null,8,["payload","componentName","componentVersion","translationData"])):n.mediaType==="image"?(p(),L(Be,{key:1,payload:n.mediaPayload},null,8,["payload"])):w("",!0)])])]))}}),Fe="@dh-io-hp/text-and-media",Ue="1.8.0",Ge="Text and Media component",We="module",Ke="ISL",Qe={"dev:csr":"SSR_DISABLED=1 vite",start:"NODE_ENV=production node dist/server.js","proxy-serve":'concurrently "npm:proxy-serve:*"',"proxy-serve:build":"vite build --watch","proxy-serve:serve":"vite preview --port 3000",dev:"vite",build:"npm run build:aem && npm run build:npm","build:aem":"vite build","build:npm":"vite build --config vite.config.npm.ts",preview:"vite preview",test:"vitest run --coverage --root src/",lint:'eslint --fix && stylelint "**/*.{scss}" --allow-empty-input',"precommit:lint":"lint-staged"},Je="./App.d.ts",Xe={".":{types:"./App.d.ts",require:"./dist/components/App.cjs",import:"./dist/components/App.mjs"},"./App.css":{import:"./dist/components/App.css",require:"./dist/components/App.css"}},Ye=["dist","App.d.ts"],Ze={"@dh-io-globalelem/footnote-component":"^3.10.0","@dh-io-globalelem/footnote-reference-component":"^2.8.0","@owc/aem-translations-util":"^1.1.0","@seamless/one-context":"1.9.0","@owc/aem-component-data-util":"1.1.0","@owc/connection-aem-tracking":"^2.7.0","@seamless/oneweb-ssr":"^2.5.1","@seamless/vue3-aem-plugin":"^0.14.0","@workbench/core":"https://assets.oneweb.mercedes-benz.com/plugin/workbench/core/7.58.1/dist.tgz","dd-trace":"5.41.1",vue:"^3.5.13"},et={scope:"@dh-io-hp"},tt={"@seamless/vite-plugin-vue-wc-css":"^0.11.0","@types/jsdom":"^21.1.7","@types/node":"^22.13.10","@vitejs/plugin-vue":"^5.2.1","@vitejs/plugin-vue-jsx":"^4.1.1","@vitest/coverage-v8":"3.0.8","@vue/test-utils":"^2.4.6","@vue/tsconfig":"^0.7.0",autoprefixer:"^10.4.21",eslint:"^9.22.0","eslint-plugin-vuejs-accessibility":"^2.4.1",jsdom:"26.0.0","lint-staged":"^15.5.0",prettier:"^3.5.3",sass:"^1.85.1",typescript:"^5.8.2",vite:"^6.2.1",vitest:"3.0.8","vue-tsc":"^2.2.8","@seamless/stylelint-config":"^8.0.0"},F={name:Fe,version:Ue,description:Ge,private:!0,type:We,license:Ke,scripts:Qe,types:Je,exports:Xe,files:Ye,dependencies:Ze,publishConfig:et,devDependencies:tt},nt=["href","target","aria-label"],ot=$({__name:"hp-cta",props:{payload:{},type:{},size:{},componentName:{},componentVersion:{}},setup(t){const e=t,n=A(e.componentName.replace(/^hp-/,"")),o=K("mediaType"),s=async(c,r)=>{await P({name:"link",category:"link",action:`${n}|${o}`,label:`cta.${r}.${A(c.label)}`,URL:c.link},e.componentVersion)};return(c,r)=>(p(),y("a",{onClick:r[0]||(r[0]=a=>s(c.payload,e.type)),href:c.payload.link,target:c.payload.target,"aria-label":c.payload.label,class:W(["wbx-button",`wbx-button--${e.type}`,`wbx-button--${e.size}`]),"data-track":"false"},ae(c.payload.label),11,nt))}}),I="globalelem-footnote-reference-component",at="globalelem-footnote-component",st=[{tag:at,loader:()=>M(()=>import("./index2.js"),[],import.meta.url)},{tag:I,loader:()=>M(()=>import("./index3.js"),[],import.meta.url)}],rt=async t=>{if(!window.customElements.get(t.tag)&&t.loader){const{defineCustomElements:e}=await t.loader();await e(window)}},it=async()=>{for(const t of st)await rt(t)},Y=[],ct=t=>`${Y.filter(n=>n.id===t).length+1}`,lt=(t,e)=>`hp_${`${t.replace("hp-","").split("-").join("")}`}${ct(e)}_${e}`.toLowerCase(),U=t=>`hp-${t}`,dt=(t,e,n,o)=>{it();const s=U(n),c=e.footnotes.some(r=>r.local);return t.querySelectorAll("[data-footnote-id]").forEach(r=>{const a=r.getAttribute("data-footnote-id"),i=e.footnotes.find(d=>d.id===a),l=`<${I} 
          content="${i.text.replace(/"/g,"&quot;")}"
          reference="${lt(o,n)}"
          ${i.local?`module-id="${U(n)}"`:""}
        ></${I}>`;i&&(r.insertAdjacentHTML("beforeend",l),Y.push({id:n}))}),{moduleId:s,isLocalScope:c}},pt={key:0,class:"hp-disclaimer"},mt={key:0,class:"hp-disclaimer__disclaimer"},ut=["innerHTML"],vt=$({__name:"hp-disclaimer",props:{componentId:{},componentName:{},data:{},payload:{},componentElement:{}},setup(t){const e=t,n=T({moduleId:"",isLocalScope:!1}),o=()=>{e.payload.footnotes&&(n.value=dt(e.componentElement,e.payload,e.componentId,e.componentName))};return N(()=>{o()}),(s,c)=>{var a,i,l;const r=se("globalelem-footnote-component");return n.value.isLocalScope||(a=e.payload)!=null&&a.disclaimer?(p(),y("section",pt,[(i=e.payload)!=null&&i.disclaimer?(p(),y("div",mt,[_("p",{innerHTML:(l=e.payload)==null?void 0:l.disclaimer,class:"hp-disclaimer__disclaimer-text"},null,8,ut)])):w("",!0),n.value.isLocalScope?(p(),L(r,{key:1,"module-id":n.value.moduleId},null,8,["module-id"])):w("",!0)])):w("",!0)}}}),ht=["data-variant"],_t={class:"hp-text-and-media__container"},yt={key:1,class:"hp-text-and-media__cta-container"},G=$({__name:"App",props:{componentId:{},componentName:{},data:{}},setup(t){const e=t,n=e.data.payload,o=n.moduleVariant,s=T(null),r=e.data.brand==="amg"?"main":"contrast";let a="";n.ctas.primary.link?a="primary":n.ctas.secondary.link&&(a="secondary");const i=a==="primary"?n.ctas.primary:n.ctas.secondary,l=o!=="textOnly",b=(()=>{var g;return l?(g=n.media)!=null&&g.sources?"image":"video":"no_media"})();return B("mediaType",b),B("wbDataOnMode",r),N(async()=>{await X()}),(g,u)=>(p(),y("article",{ref_key:"componentElement",ref:s,class:"hp-text-and-media","data-variant":h(o)},[_("div",_t,[C(_e,{textPayload:h(n).text,class:"hp-text-and-media__text-container"},null,8,["textPayload"]),l?(p(),L(He,{key:0,mediaPayload:h(n).media,mediaType:h(b),componentName:e.componentName,componentVersion:h(F).version,translationData:e.data.translationData,class:"hp-text-and-media__media-container"},null,8,["mediaPayload","mediaType","componentName","componentVersion","translationData"])):w("",!0),h(a)?(p(),y("div",yt,[C(ot,{payload:h(i),type:h(a),size:"medium",componentName:e.componentName,componentVersion:h(F).version},null,8,["payload","type","componentName","componentVersion"])])):w("",!0)]),s.value?(p(),L(vt,{key:0,componentId:e.componentId,componentName:e.componentName,data:e.data,payload:h(n).disclaimer,componentElement:s.value},null,8,["componentId","componentName","data","payload","componentElement"])):w("",!0)],8,ht))}}),ft=t=>({moduleVariant:t.moduleVariant,text:{headline:t.headline,overline:t.overline,subline:t.subline},ctas:{primary:{label:t.primaryLabel,link:t.primaryLink,target:t.primaryTarget},secondary:{label:t.secondaryLabel,link:t.secondaryLink,target:t.secondaryTarget}},media:{description:t.media.description,source:t.media.source,sources:t.media.sources,title:t.media.title},disclaimer:{disclaimer:t.disclaimer,footnotes:t.footnotes}}),gt="HP",bt=de(gt),Et="i18next",wt=(t,e)=>{if(e==="AQ"){if(t==="en")return"en-GB";if(t==="de")return"de-DE"}return`${t}-${e}`},$t=async(t,e,n)=>{let o;const{language:s,country:c}=t,r=wt(s,c);try{o=await pe(r,n,Et)}catch(a){bt.error(`${e} - Error fetching translations in ${c}-${s}`,a,new Date().toISOString())}return o??{}},R="hp-text-and-media",Tt="28323c20b120aaebcce100cbbffae971",kt=async(t,e,n)=>{let o;return t!=="csr"?o=re(G,{componentId:e,componentName:R,data:n}):o=ie(G,{componentId:e,componentName:R,data:n}),o},At=async t=>{var n,o;const e=await $t(t.pageAEMContext,R,Tt);return{brand:((o=(n=t.pageAEMContext)==null?void 0:n.brand)==null?void 0:o.subBrand)??"",payload:ft(t.payload),translationData:e}},V={createApp:kt,loader:At},Lt="_OneWebSSR_componentId_",xt="_OneWebSSR_renderMode_",Ot="_OneWebSSR_loaderData_",Nt={install(t,e,n,o){t.provide(Lt,e).provide(xt,n).provide(Ot,o)}};async function St(t,e){async function n({element:o}){var d;let s,c;const r=o.getAttribute("component-id"),a=document.getElementById(`ssr-root-${r}`)??o.appendChild(document.createElement("div")),i=(d=window.ssrData)==null?void 0:d[r];if(s=i,!i&&V.loader){const b=await async function(g){var O,m,v;const u=window.top||window,f=u.aemNamespace??{},{payload:E,config:x}=((O=f.componentData)==null?void 0:O[g])??{};return{componentId:g,requestUrl:u.location.href,version:"1.8.0",payload:E,config:x,globalAEMContext:f.environmentVariables,pageAEMContext:f.pageEnvironmentVariables,vehicleContext:f.vehicleData,dealerContext:f.dealerContext,pageProperties:{description:((m=document.querySelector('meta[name="description"]'))==null?void 0:m.getAttribute("content"))||"","og:image":((v=document.querySelector('meta[property="og:image"]'))==null?void 0:v.getAttribute("content"))||""}}}(r);s=await V.loader(b,!1).catch(g=>{c=g})}const l=i?"hydrate":"csr";(await t(l,r,s,c)).use(Nt,r,l,s).mount(a)}document.querySelectorAll(`[data-component-name="${e}"]`).forEach(o=>n({element:o})),(window.top??window).aemNamespace.pageEnvironmentVariables.runMode==="AUTHOR"&&M(()=>import("./author.js"),[],import.meta.url).then(o=>o.default({componentName:e,mountComponent:n})).catch(o=>console.error("Could not load author script",o))}St(V.createApp,"hp-text-and-media");export{M as _};
