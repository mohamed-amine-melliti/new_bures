import{useSSRContext as be,ref as E,defineComponent as I,inject as q,computed as k,watch as le,onMounted as Y,onServerPrefetch as we,createElementBlock as w,openBlock as _,unref as g,createElementVNode as f,normalizeClass as x,createCommentVNode as C,Fragment as H,renderList as he,toDisplayString as ye,reactive as Ee,onUnmounted as ke,provide as Z,onBeforeUnmount as Se,renderSlot as $e,createVNode as F,createBlock as ee,createSSRApp as Ae,createApp as De}from"vue";/**
 * @preserve
 * Licenses of bundled dependencies can be found in dependencies-licenses.txt
 *//*! aem-component-data-util 1.1.0 */function Le(e){var n;if(!(typeof window<"u")){const o=(n=be())==null?void 0:n.AEMContext;return{payload:o==null?void 0:o.payload,config:o==null?void 0:o.config}}const t=(window.top||window).aemNamespace.componentData;return e?Array.isArray(e)?Object.fromEntries(e.map(o=>[o,t[o]])):t[e]:t}const de="https://assets.oneweb.mercedes-benz.com/plugin/workbench/assets/4.5.0/icons",V=async(e,t)=>{await Promise.all(Object.entries(e).map(async([n,{name:o}])=>{const i=await Ce(o,t);e[n].svg=i}))},Ce=async(e,t)=>await(await fetch(`${t??de}/${e}.svg`)).text();var U=(e=>(e.play="bds/media-play/24",e.pause="bds/pause/24",e))(U||{}),W=(e=>(e.play="play",e.pause="pause",e))(W||{});const Oe="3.11.0",Me={version:Oe};/*! connection-aem-tracking 2.7.0 */const ue="OWC_TRACKING_MANAGER",te="PUSH_TRACKING_EVENT",ne={trackingEvents:[]};new class extends window.top.seamlessStore.SeamlessConnection{constructor(){super(ue)}get initialState(){return ne}getReducer(){return(e=ne,t)=>t.type===this.getActionType(te)?{...e,trackingEvents:[...e.trackingEvents,t.payload]}:e}getPublicDispatchers(){return{pushTrackingEvent:e=>{var t;return(t=window.top)==null||t.dataLayer_ow.push(e),this.getAction(te,e)}}}};const Re=()=>window.top.seamlessStore.initializeStore().getConnectionDispatchers(ue).then(e=>e);let G;const Pe=(e,t,n)=>({event:"click",eventDetail:e,application:{id:n||"aem",version:t,parentApplicationId:n||"aem"}}),me=async()=>{G=await Re()},xe=async(e,t,n="")=>{G||await me();const o=Pe(e,t,n);G.pushTrackingEvent(o)},J=async e=>await xe(e,Me.version),ve=E(!1),X=e=>{var t;return((t=e.toLowerCase().match(/[a-z]+\d*|\d+/g))==null?void 0:t.join("_"))??""};var P=(e=>(e.play="video_start",e.pause="video_pause",e.emptyTitle="no_title",e))(P||{}),T=(e=>(e.play="video_start",e.pause="video_pause",e.progress="video_progress",e.complete="video_complete",e))(T||{});const z=[25,50,90],Te=["data-on"],Ie=["aria-label"],qe=["innerHTML"],Ne=I({__name:"video-stage-controls",setup(e){const t=E({play:{name:U.play,svg:""},pause:{name:U.pause,svg:""}}),n=q("video"),o=q("wbDataOnMode"),i=k(()=>{var r;return(r=n.value)==null?void 0:r.isPlaying}),c=k(()=>i.value?W.pause:W.play),a=k(()=>{var r;return((r=window.workbench)==null?void 0:r.iconRootPath)??de}),s=k(()=>t.value[c.value].svg),d=async()=>{var r,u;i.value?(r=n.value)==null||r.ref.pause():(u=n.value)==null||u.ref.play(),ve.value=i.value,await l()},l=async()=>{var r;await J({name:i.value?T.pause:T.play,category:"video",action:`video_html5.${i.value?P.pause:P.play}`,label:`video_stage.${X((r=n.value)==null?void 0:r.ref.title)||P.emptyTitle}`})};return le(a,async r=>await V(t.value,r)),Y(async()=>{s.value||await V(t.value)}),we(async()=>await V(t.value)),(r,u)=>(_(),w("div",{"data-on":g(o)},[f("button",{type:"button","aria-label":c.value,onClick:d,class:x("wbx-round-button wbx-round-button--medium wbx-round-button--elevation-xs owc-video-stage-control__button")},[f("div",{class:"owc-video-stage-control__icon","aria-hidden":"true",innerHTML:s.value},null,8,qe)],8,Ie)],8,Te))}}),Ve=["innerHTML"],ze=["innerHTML"],Be=["data-on"],je=["onClick","target","href","aria-label"],He=I({__name:"video-stage-content",props:{contentData:{type:Object,required:!0},brand:{type:String,required:!0}},setup(e){const t=e,n=["secondary","primary"],o=k(()=>{var a;return(a=t.contentData)!=null&&a.isAnimated?"owc-video-stage-content--animated":""}),i=q("wbDataOnMode"),c=async a=>{var l;const{label:s="",link:d=""}=((l=t.contentData)==null?void 0:l.ctas[a])??{};await J({category:"link",action:"video_stage",label:`cta.${a}.${X(s)}`,URL:d})};return(a,s)=>{var d,l,r;return _(),w("div",{class:x(["owc-video-stage-content__textCTA",o.value])},[f("h1",{class:"wb-heading-xl owc-video-stage-content__headline",innerHTML:(d=e.contentData)==null?void 0:d.headline},null,8,Ve),(l=e.contentData)!=null&&l.description?(_(),w("p",{key:0,class:"wb-text-l owc-video-stage-content__description",innerHTML:(r=e.contentData)==null?void 0:r.description},null,8,ze)):C("",!0),f("section",{class:"owc-video-stage-content__buttons","data-on":g(i)},[(_(),w(H,null,he(n,u=>{var b,v,p,y,D,m,h,S,$,O,M,R;return _(),w(H,null,[(v=(b=e.contentData)==null?void 0:b.ctas[u])!=null&&v.link?(_(),w("a",{onClick:Lt=>c(u),key:(y=(p=e.contentData)==null?void 0:p.ctas[u])==null?void 0:y.label,class:x(`wbx-button wbx-button--${u} wbx-button--large owc-video-stage-content__button`),target:(m=(D=e.contentData)==null?void 0:D.ctas[u])==null?void 0:m.target,href:(S=(h=e.contentData)==null?void 0:h.ctas[u])==null?void 0:S.link,"aria-label":(O=($=e.contentData)==null?void 0:$.ctas[u])==null?void 0:O.label,"data-track":"false"},ye((R=(M=e.contentData)==null?void 0:M.ctas[u])==null?void 0:R.label),11,je)):C("",!0)],64)}),64))],8,Be)],2)}}}),Ue=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),We=function(e,t){return new URL(e,t).href},oe={},N=function(t,n,o){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),d=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=We(l,o),l in oe)return;oe[l]=!0;const r=l.endsWith(".css"),u=r?'[rel="stylesheet"]':"";if(!!o)for(let p=a.length-1;p>=0;p--){const y=a[p];if(y.href===l&&(!r||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${u}`))return;const v=document.createElement("link");if(v.rel=r?"stylesheet":Ue,r||(v.as="script"),v.crossOrigin="",v.href=l,d&&v.setAttribute("nonce",d),document.head.appendChild(v),r)return new Promise((p,y)=>{v.addEventListener("load",p),v.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function c(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&c(s.reason);return t().catch(c)})};let B;const Ge={viewport:""},A=Ee(Ge);k(()=>A.viewport=="mq4"||A.viewport=="mq5"||A.viewport=="mq6");const pe=e=>{var n;const t=(n=e==null?void 0:e.detail)==null?void 0:n.current;ge(t)},ge=e=>{A.viewport=e},Qe=async()=>{if(!B){const{MediaQueryService:e}=await N(async()=>{const{MediaQueryService:t}=await import("./index2.js");return{MediaQueryService:t}},[],import.meta.url);B=new e(window),ge(B.getCurrentMediaQuery())}},Ke=async()=>{await Qe(),window.addEventListener("wbresize",pe)},Ye=()=>{window.removeEventListener("wbresize",pe)},Je=({isManuallyPaused:e,isPlaying:t,isVideoInView:n,hasStartedToPlay:o})=>({videoObserver:new IntersectionObserver(c=>{c.forEach(a=>{const s=a.target;a.isIntersecting?(n&&(n.value=!0),s.paused&&!e.value&&(s.play(),t&&(t.value=!0),o&&!o.value&&(o.value=!0))):(n&&(n.value=!1),s.pause(),t&&(t.value=!1))})},{root:null,rootMargin:"0px",threshold:0})});var L=(e=>(e.mobile="mobile",e.desktop="desktop",e))(L||{});const fe={mq1:"mobile",mq2:"mobile",mq3:"mobile",mq4:"desktop",mq5:"desktop",mq6:"desktop"},ae={test:"https://int.assets.oneweb.mercedes-benz.com/plugin",int1:"https://int.assets.oneweb.mercedes-benz.com/plugin",pprod:"https://assets.oneweb.mercedes-benz.com/plugin",prod:"https://assets.oneweb.mercedes-benz.com/plugin"},j=(e,t)=>`${ae[e]||ae.test}/hp-assets/latest/${t}`,Xe={class:"owc-video-stage-media__ratio"},Ze=["title","poster"],Fe=["src"],et=["src"],tt=["src"],nt=I({__name:"video-stage-video",props:{mediaData:{type:Object,required:!0},brand:{type:String,required:!0},env:{type:String,required:!0}},setup(e){const t=e,n=q("video");let o=z;const i=E(!1),c=E({}),a=E({}),s=m=>`images/brands/${m}/background/poster-image.jpg`,d={amg:j(t.env,s("mercedes-amg")),maybach:j(t.env,s("mercedes-maybach")),mb:j(t.env,s("mercedes-benz"))},l=d[t.brand]??d.mb,r=k(()=>A.viewport?fe[A.viewport]:""),u=k(()=>{var m;return(m=n.value)==null?void 0:m.isPlaying}),b=k(()=>{var m,h;return(r.value?(m=t.mediaData[r.value])==null?void 0:m.image:(h=t.mediaData[L.desktop])==null?void 0:h.image)??l});Y(async()=>{n.value.ref=c.value,c.value.addEventListener("timeupdate",v);const{videoObserver:m}=Je({isManuallyPaused:ve,isPlaying:u,isVideoInView:i});a.value=m,a.value.observe(c.value)}),ke(()=>{c.value&&a.value.unobserve(c.value)});const v=m=>{var $;if(!i.value)return;const h=m.target;Math.floor(h.currentTime/h.duration*100)>=o[0]&&(J({name:D(),category:"video",action:`video_html5.video_${o[0]}`,label:`video_stage.${X(($=c.value)==null?void 0:$.title)||P.emptyTitle}`}),o.shift()),o.length===0&&c.value.removeEventListener("timeupdate",v)},p=()=>{n.value.isPlaying=!0},y=()=>{n.value.isPlaying=!1},D=()=>o[0]===z[z.length-1]?T.complete:T.progress;return(m,h)=>{var S,$,O,M,R;return _(),w("section",Xe,[f("video",{class:"owc-video-stage-media__video",muted:"",playsinline:"",loop:"",autoplay:"",title:(S=e.mediaData[r.value])==null?void 0:S.title,poster:b.value,onPlay:p,onPause:y,ref_key:"videoRef",ref:c,"aria-hidden":"true"},[($=e.mediaData[g(L).mobile])!=null&&$.video?(_(),w(H,{key:0},[f("source",{src:(O=e.mediaData[g(L).mobile])==null?void 0:O.video,type:"video/mp4",media:"(max-width:1023px)"},null,8,Fe),f("source",{src:(M=e.mediaData[g(L).desktop])==null?void 0:M.video,type:"video/mp4",media:"(min-width:1024px)"},null,8,et)],64)):(_(),w("source",{key:1,src:(R=e.mediaData[g(L).desktop])==null?void 0:R.video,type:"video/mp4"},null,8,tt))],40,Ze)])}}}),ot={class:"owc-video-stage-disclaimer--content"},at=["innerHTML"],st=I({__name:"video-stage-disclaimer",props:{disclaimerData:{type:String}},setup(e){return(t,n)=>(_(),w("div",ot,[f("p",{class:"wb-text-s-static owc-video-stage-disclaimer--text",innerHTML:e.disclaimerData},null,8,at)]))}}),se=(e,t="mq1")=>{var n;return e!=null&&e.sources?e==null?void 0:e.sources[t]:(n=e==null?void 0:e.source)==null?void 0:n.replace("{mq}",t)},rt=e=>{var n,o,i,c;return{content:{headline:e.headline,description:e.subline??"",isAnimated:e.isAnimated,ctas:{primary:{label:e.primaryLabel,link:e.primaryLink,target:e.primaryTarget},secondary:{label:e.secondaryLabel,link:e.secondaryLink,target:e.secondaryTarget}}},media:{mobile:{image:se(e.mobileImage),video:(n=e.mobileVideo)==null?void 0:n.source,title:(o=e.mobileVideo)==null?void 0:o.title},desktop:{image:se(e.desktopImage,"mq4"),video:(i=e.desktopVideo)==null?void 0:i.source,title:(c=e.desktopVideo)==null?void 0:c.title}},disclaimer:e.disclaimerText,footnotes:e.footnotes}},Q="globalelem-footnote-reference-component",it="globalelem-footnote-component",ct=[{tag:it,loader:()=>N(()=>import("./index3.js"),[],import.meta.url)},{tag:Q,loader:()=>N(()=>import("./index4.js"),[],import.meta.url)}],lt=async e=>{if(!window.customElements.get(e.tag)&&e.loader){const{defineCustomElements:t}=await e.loader();await t(window)}},dt=async()=>{for(const e of ct)await lt(e)},_e=[],ut=e=>`${_e.filter(n=>n.id===e).length+1}`,mt=(e,t)=>`hp_${`${e.replace("hp-","").split("-").join("")}`}${ut(t)}_${t}`.toLowerCase(),re=e=>`hp-${e}`,vt=(e,t,n,o)=>{dt();const i=re(n),c=t.footnotes.some(a=>a.local);return e.querySelectorAll("[data-footnote-id]").forEach(a=>{const s=a.getAttribute("data-footnote-id"),d=t.footnotes.find(r=>r.id===s),l=`<${Q} 
          content="${d.text.replace(/"/g,"&quot;")}"
          reference="${mt(o,n)}"
          ${d.local?`module-id="${re(n)}"`:""}
        ></${Q}>`;d&&(a.insertAdjacentHTML("beforeend",l),_e.push({id:n}))}),{moduleId:i,isLocalScope:c}},pt={class:"owc-video-stage"},gt={class:"owc-video-stage-controls"},ft={class:"owc-video-stage-media"},_t={class:"owc-video-stage-content"},bt={class:"owc-video-stage-content__container"},wt={class:"owc-video-stage-content__inner"},ht=["module-id"],ie=I({__name:"App",props:{componentId:{type:String,required:!0},componentName:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e;let n=E({});const o=E(""),i=t.data.brand,c=i==="amg"?"main":"contrast",a=E({}),s=E({moduleId:"",isLocalScope:!1}),d=E({isPlaying:!0,ref:{}});Z("video",d),Z("wbDataOnMode",c),n.value=rt(Le(t.componentId).payload);const l=k(()=>fe[A.viewport]);le(l,(u,b)=>{b&&(o.value=u)}),Y(async()=>{me(),await Ke(),r()}),Se(()=>Ye());const r=()=>{n.value.footnotes&&(s.value=vt(a.value,n.value,t.componentId,t.componentName))};return(u,b)=>(_(),w("div",{ref_key:"videoStageElement",ref:a},[$e(u.$slots,"default"),f("section",pt,[f("div",gt,[F(Ne)]),f("div",ft,[g(n).media?(_(),ee(nt,{mediaData:g(n).media,brand:g(i),key:o.value,env:e.data.environment},null,8,["mediaData","brand","env"])):C("",!0)]),f("div",_t,[f("div",bt,[f("div",wt,[g(n).content?(_(),ee(He,{key:0,brand:g(i),contentData:g(n).content},null,8,["brand","contentData"])):C("",!0)])])])]),f("section",{class:x(["owc-video-stage-footer wb-grid-container",{"owc-video-stage-footer--empty":!s.value.isLocalScope&&!g(n).disclaimer}])},[g(n).disclaimer?(_(),w("div",{key:0,class:x(["owc-video-stage-disclaimer",{"owc-video-stage-disclaimer--footnotes":s.value.isLocalScope}])},[F(st,{disclaimerData:g(n).disclaimer},null,8,["disclaimerData"])],2)):C("",!0),s.value.isLocalScope?(_(),w("globalelem-footnote-component",{key:1,"module-id":s.value.moduleId,theme:"dark"},null,8,ht)):C("",!0)],2)],512))}}),ce="hp-video-stage",yt=async(e,t,n)=>{let o;return e!=="csr"?o=Ae(ie,{componentId:t,data:n,componentName:ce}):o=De(ie,{componentId:t,data:n,componentName:ce}),o},Et=async e=>{var t,n,o;return{brand:((n=(t=e.pageAEMContext)==null?void 0:t.brand)==null?void 0:n.subBrand)??"",environment:((o=e.pageAEMContext)==null?void 0:o.stageVariant)??"test"}},K={createApp:yt,loader:Et},kt="_OneWebSSR_componentId_",St="_OneWebSSR_renderMode_",$t="_OneWebSSR_loaderData_",At={install(e,t,n,o){e.provide(kt,t).provide(St,n).provide($t,o)}};async function Dt(e,t){async function n({element:o}){var r;let i,c;const a=o.getAttribute("component-id"),s=document.getElementById(`ssr-root-${a}`)??o.appendChild(document.createElement("div")),d=(r=window.ssrData)==null?void 0:r[a];if(i=d,!d&&K.loader){const u=await async function(b){var m,h,S;const v=window.top||window,p=v.aemNamespace??{},{payload:y,config:D}=((m=p.componentData)==null?void 0:m[b])??{};return{componentId:b,requestUrl:v.location.href,version:"3.11.0",payload:y,config:D,globalAEMContext:p.environmentVariables,pageAEMContext:p.pageEnvironmentVariables,vehicleContext:p.vehicleData,dealerContext:p.dealerContext,pageProperties:{description:((h=document.querySelector('meta[name="description"]'))==null?void 0:h.getAttribute("content"))||"","og:image":((S=document.querySelector('meta[property="og:image"]'))==null?void 0:S.getAttribute("content"))||""}}}(a);i=await K.loader(u,!1).catch(b=>{c=b})}const l=d?"hydrate":"csr";(await e(l,a,i,c)).use(At,a,l,i).mount(s)}document.querySelectorAll(`[data-component-name="${t}"]`).forEach(o=>n({element:o})),(window.top??window).aemNamespace.pageEnvironmentVariables.runMode==="AUTHOR"&&N(()=>import("./author.js"),[],import.meta.url).then(o=>o.default({componentName:t,mountComponent:n})).catch(o=>console.error("Could not load author script",o))}Dt(K.createApp,"hp-video-stage");export{N as _};
